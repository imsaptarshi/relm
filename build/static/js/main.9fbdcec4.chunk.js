(this.webpackJsonprelm=this.webpackJsonprelm||[]).push([[0],{159:function(e,t,n){},161:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(58),c=n.n(o),i=(n(159),n(2)),s=n.n(i),l=n(10),d=n(4),u=(n(161),n(217)),b=n(215),j=n(219),m=n(264),h=n(221),p=n.p+"static/media/logo.e169293d.svg",x=n(218),f=n(32),O=n(216),g=n(220),v=n(144),w=Object(v.a)("https://thencvbhlwygpcdccbkq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzAwMjg5NiwiZXhwIjoxOTQ4NTc4ODk2fQ.3uEVHpW_zoY11trlhhuaO1ynC3Y4IBrpd4r7lc6Xnj8"),y=n(1);var k=function(e){var t=e.communityId,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),v=h[0],k=h[1];Object(r.useEffect)((function(){window.localStorage.getItem("email")&&C(),t&&S()}),[t]);var C=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("users").select("username, avatar_url, email").eq("email",window.localStorage.getItem("email")).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:c(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("communities").select("name, logo").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:k(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){return Object(y.jsx)(f.b,{to:"/signin",children:Object(y.jsxs)(m.a,{bg:"alpha.white",color:"white",px:"6",size:"sm",fontSize:"xs",fontWeight:"bold",border:"1px",borderColor:"transparent",transitionDuration:"200ms",_hover:{bg:"rgba(255, 255, 255, 0.05)",borderColor:"whiteAlpha.200"},_focus:{},_active:{bg:"rgba(255, 255, 255, 0.12)"},children:["Sign in",Object(y.jsx)(b.a,{ml:"1",children:Object(y.jsx)(O.a,{size:"14px"})})]})})};return Object(y.jsxs)(u.a,{w:"full",justify:"space-between",alignItems:"center",children:[Object(y.jsxs)(u.a,{experimental_spaceX:v?"2":"3",alignItems:"center",color:"white",_hover:{color:"brand.primary"},cursor:"pointer",transitionDuration:"300ms",children:[Object(y.jsx)(x.a,{rounded:v?"lg":"none",src:v?null===v||void 0===v?void 0:v.logo:p,alt:"relm",w:v?"7":"8",h:v?"7":"8"}),Object(y.jsx)(j.a,{fontWeight:"bold",fontSize:v?"base":"24",children:v?Object(y.jsx)(y.Fragment,{children:null===v||void 0===v?void 0:v.name}):Object(y.jsx)(y.Fragment,{children:"relm"})})]}),window.localStorage.getItem("email")?Object(y.jsx)(f.b,{to:"/home",children:Object(y.jsx)(m.a,{bg:"alpha.white",color:"white",px:"6",size:"sm",fontSize:"xs",fontWeight:"semibold",border:"1px",borderColor:"transparent",transitionDuration:"200ms",_hover:{bg:"rgba(255, 255, 255, 0.05)",borderColor:"whiteAlpha.200"},_focus:{},leftIcon:Object(y.jsx)(g.a,{size:"14px"}),_active:{bg:"rgba(255, 255, 255, 0.12)"},whiteSpace:"nowrap",children:Object(y.jsx)(j.a,{isTruncated:!0,overflow:"clip",maxW:"80px",children:null===o||void 0===o?void 0:o.username})})}):Object(y.jsx)(_,{})]})};var C=function(){return Object(y.jsx)(u.a,{bg:"brand.secondary",justify:"center",w:"full",children:Object(y.jsxs)(b.a,{minH:"100vh",py:"6",px:{base:"8",lg:"24"},maxW:"1400px",w:"full",children:[Object(y.jsx)(k,{}),Object(y.jsxs)(u.a,{justify:"center",alignItems:"center",mt:"24",direction:"column",children:[Object(y.jsx)(j.a,{color:"brand.primary",fontWeight:"black",fontSize:{base:"4xl",md:"5xl",lg:"6xl"},align:"center",children:"Activating Your Community"}),Object(y.jsxs)(j.a,{color:"white",fontWeight:"medium",fontSize:{base:"xs",md:"sm",lg:"lg"},mt:"2",px:{lg:"40",md:"40",xl:"80"},align:"center",children:["Making communities more engaging with events, community analytics and newsletters with"," ",Object(y.jsx)(j.a,{cursor:"pointer",display:"inline",color:"brand.primary",children:"Relm"})]}),Object(y.jsx)(f.b,{to:"/signin",children:Object(y.jsxs)(m.a,{_hover:{transform:"translateY(-1.5px)"},_active:{bg:"pink.600"},_focus:{},bg:"brand.primary",color:"white",mt:"10",rounded:"2xl",fontWeight:"bold",fontSize:"lg",px:"14",py:"7",children:["Get Into Realm",Object(y.jsx)(h.a,{position:"absolute",top:"-2",right:"-3",color:"white",rounded:"full",bg:"pink.800",px:"3",py:"1",children:"beta"})]})})]})]})})},S=n(20),_=n(262),A=n(224),I=n(214),z=n(227),W=n(223),E=n.p+"static/media/google.d21a7387.png";var D=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(Object(y.jsx)(j.a,{children:"Continue"})),c=Object(d.a)(o,2),i=c[0],h=c[1],f=Object(r.useState)(""),O=Object(d.a)(f,2),g=O[0],v=O[1],k=Object(_.a)(),C=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.auth.signIn({provider:"google"});case 3:if(n=e.sent,!(r=n.error)){e.next=7;break}throw r;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),k({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 12:return e.prev=12,console.log("finally"),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,w.auth.signIn({email:t});case 4:if(n=e.sent,!(r=n.error)){e.next=8;break}throw r;case 8:k({title:"Account Created",position:"bottom",description:"Check your email for login link",status:"success",duration:5e3,isClosable:!0}),h(Object(y.jsx)(W.a,{})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),k({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 15:return e.prev=15,a(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(y.jsx)(b.a,{bg:"brand.secondary",pt:"10",pl:"10",display:{base:"block",md:"none"},children:Object(y.jsx)(x.a,{src:p,alt:"relm",w:"12",h:"12"})}),Object(y.jsxs)(u.a,{bg:"black.400",display:{base:"none",md:"flex"},w:{md:"35%"},h:"100vh",p:{base:"6",md:"10"},direction:"column",justify:"space-between",children:[Object(y.jsx)(x.a,{src:p,alt:"relm",w:"14",h:"14"}),Object(y.jsxs)(b.a,{color:"white",children:[Object(y.jsx)(j.a,{fontWeight:"bold",fontSize:"4xl",children:"relm"}),Object(y.jsx)(j.a,{fontWeight:"thin",fontSize:"sm",children:"Activating your community"})]})]}),Object(y.jsx)(b.a,{w:{base:"100%",md:"65%"},h:"100vh",bg:"brand.secondary",p:{base:"10",md:"20"},children:Object(y.jsxs)(b.a,{w:{base:"100%",lg:"400px"},children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"bold",fontSize:"3xl",children:"Sign In"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",mt:"8",fontSize:"sm",children:"Sign in with your email"}),Object(y.jsx)(A.a,{type:"email",onChange:function(e){v(e.target.value),console.log(g)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Your email"}),Object(y.jsx)(m.a,{w:"full",mt:"3",rounded:"lg",_focus:{},_active:{},onClick:function(){return S(g)},children:n?Object(y.jsx)(I.a,{}):i}),Object(y.jsxs)(u.a,{alignItems:"center",mt:"14",mb:"4",experimental_spaceX:"3",children:[Object(y.jsx)(j.a,{color:"white",fontSize:"xs",fontWeight:"medium",children:"OR"}),Object(y.jsx)(z.a,{w:"full",color:"white"})]}),Object(y.jsx)(m.a,{leftIcon:Object(y.jsx)(x.a,{src:E,w:"16px",h:"16px"}),border:"1px",borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200"},_focus:{},_active:{},w:"full",bg:"whiteAlpha.200",rounded:"lg",fontSize:"sm",color:"white",onClick:function(){return C()},children:"Sign In With Google"}),Object(y.jsx)(j.a,{color:"whiteAlpha.500",mt:"4",fontSize:"sm",children:"By signing in you agree to our terms and conditions"})]})})]})};var F=function(e){e.session;var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(null),i=Object(d.a)(c,2),h=i[0],f=i[1],g=Object(r.useState)(null),v=Object(d.a)(g,2),k=v[0],C=v[1],S=Object(r.useState)(!0),z=Object(d.a)(S,2),W=z[0],E=z[1],D=Object(_.a)();Object(r.useEffect)((function(){F()}),[]);var F=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E(!0),(t=w.auth.user())&&(console.log(t),f(t.email),t.username&&o(null===t||void 0===t?void 0:t.username),t.user_metadata&&C(null===(n=t.user_metadata)||void 0===n?void 0:n.avatar_url))}catch(r){console.log(r)}finally{E(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>3)){e.next=23;break}return e.prev=1,E(!0),n=w.auth.user(),r={id:n.id,username:t,avatar_url:k,email:h},e.next=7,w.from("users").upsert(r,{returning:"minimal"});case 7:if(a=e.sent,!(o=a.error)){e.next=11;break}throw o;case 11:window.localStorage.setItem("email",h),window.location.href="/home",e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),D({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 18:return e.prev=18,E(!1),e.finish(18);case 21:e.next=24;break;case 23:D({title:"Error",position:"bottom",description:"Your name should have than 3 characters",status:"error",duration:5e3,isClosable:!0});case 24:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(y.jsx)(b.a,{bg:"brand.secondary",pt:"10",pl:"10",display:{base:"block",md:"none"},children:Object(y.jsx)(x.a,{src:p,alt:"relm",w:"12",h:"12"})}),Object(y.jsxs)(u.a,{display:{base:"none",md:"flex"},w:{md:"35%"},h:"100vh",bg:"black.400",p:{base:"6",md:"10"},direction:"column",justify:"space-between",children:[Object(y.jsx)(x.a,{src:p,alt:"relm",w:"14",h:"14"}),Object(y.jsxs)(b.a,{color:"white",children:[Object(y.jsx)(j.a,{fontWeight:"bold",fontSize:"4xl",children:"relm"}),Object(y.jsx)(j.a,{fontWeight:"thin",fontSize:"sm",children:"Activating your community"})]})]}),Object(y.jsx)(b.a,{w:{base:"100%",md:"65%"},h:"100vh",bg:"brand.secondary",p:{base:"10",md:"20"},children:Object(y.jsxs)(b.a,{w:{base:"100%",lg:"400px"},children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"bold",fontSize:"3xl",children:"Let's know more about you"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",mt:"8",fontSize:"sm",children:"What do we call you?"}),Object(y.jsx)(A.a,{value:a,type:"text",onChange:function(e){o(e.target.value),console.log(a)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Your name"}),Object(y.jsx)(m.a,{float:"right",mt:"6",rounded:"lg",_focus:{},_active:{},rightIcon:W?Object(y.jsx)(I.a,{size:"sm"}):Object(y.jsx)(O.a,{size:"20px"}),onClick:function(){return B(a)},children:"Continue"})]})})]})},B=n(21),N=Object(r.createContext)({user:void 0,setUser:function(){}}),X=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1];return Object(y.jsx)(N.Provider,{value:{user:o,setUser:c},children:t})},q=function(){return Object(r.useContext)(N)},T=n(236),L=n(228),R=n(229),M=n(230);var H=function(e){var t=e.id,n=e.name,r=(e.description,e.audience),a=e.events,o=e.logo;return Object(y.jsxs)(u.a,{onClick:function(){window.location.href="/manage/community/".concat(t)},border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},alignItems:"center",bg:"alpha.white",overflow:"clip",isTruncated:!0,p:"2",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:"320px",children:[Object(y.jsx)(L.a,{ratio:1,minW:"20",children:Object(y.jsx)(x.a,{src:o,rounded:"lg"})}),Object(y.jsxs)(u.a,{isTruncated:!0,direction:"column",justify:"space-between",children:[Object(y.jsx)(j.a,{isTruncated:!0,pr:"2",fontWeight:"bold",fontSize:{base:"lg",md:"lg"},children:n}),Object(y.jsxs)(u.a,{experimental_spaceX:"2",alignItems:"center",children:[Object(y.jsx)(R.a,{size:"16px"}),Object(y.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},children:r})]}),Object(y.jsxs)(u.a,{experimental_spaceX:"2",alignItems:"center",children:[Object(y.jsx)(M.a,{size:"16px"}),Object(y.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},children:a})]})]})]})},G=n(231),J=n(232),P=n(233),U=n(234),Y=n(267),V=n(265),Q=n(263),K=n(238),Z={"Quick Event":{enabled:!0},Audience:{enabled:!0},Community:{enabled:!0},Insights:{enabled:!0},Newsletter:{enabled:!1},Explore:{enabled:!1},"Revenue Solution":{enabled:!1}};var $=function(e){var t=e.communityId,n=Object(r.useState)(window.location.pathname),a=Object(d.a)(n,2),o=a[0],c=a[1],i=q(),h=i.user,O=i.setUser,g=Object(r.useState)(void 0),v=Object(d.a)(g,2),k=v[0],C=v[1];Object(r.useEffect)((function(){h||O(JSON.parse(localStorage.getItem("user"))),t&&S(t)}),[t,O,h]);var S=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo ,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:C(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),_=[{name:"Home",isExternal:!1,link:t?"/manage/community/".concat(t):"/home",Icon:function(e){return Object(y.jsx)(G.a,Object(B.a)({},e))}},{name:"Audience",isExternal:!1,link:t?"/manage/community/".concat(t,"/audience"):"/audience",Icon:function(e){return Object(y.jsx)(R.a,Object(B.a)({},e))}},{name:"Events",isExternal:!1,link:t?"/manage/community/".concat(t,"/events"):"/events",Icon:function(e){return Object(y.jsx)(M.a,Object(B.a)({},e))}},{name:"Insights",isExternal:!1,link:"/insights",Icon:function(e){return Object(y.jsx)(J.a,Object(B.a)({},e))}},{name:"Newsletter",isExternal:!1,link:"#",Icon:function(e){return Object(y.jsx)(P.a,Object(B.a)({},e))}},{name:"Explore",isExternal:!1,link:"#",Icon:function(e){return Object(y.jsx)(U.a,Object(B.a)({},e))}}],A=function(e){var n=e.name,r=e.logo;return Object(y.jsxs)(u.a,{cursor:"pointer",onClick:function(){window.location.href="/manage/community/".concat(t)},mb:"6",display:"flex",alignItems:"center",experimental_spaceX:"2",children:[Object(y.jsx)(x.a,{src:r,alt:n,w:{base:"10",lg:"8"},h:{base:"10",lg:"8"},rounded:"full"}),Object(y.jsx)(j.a,{isTruncated:!0,color:"white",display:{base:"none",lg:"block"},fontWeight:"bold",fontSize:"xl",children:n})]})},I=function(e){var t,n=e.name,r=e.link,a=e.Icon,i=!Z[n]||!!(null===(t=Z[n])||void 0===t?void 0:t.enabled);return Object(y.jsx)(f.b,{to:i?r:"#",onClick:function(){return c(n)},children:Object(y.jsx)(Y.a,{label:n,display:{lg:"none"},placement:"right",children:Object(y.jsxs)(u.a,{opacity:i?"1":"0.5",cursor:i?"pointer":"not-allowed",experimental_spaceX:"3",fontSize:"lg",color:o===r?"brand.primary":"white",alignItems:"center",children:[Object(y.jsx)(a,{fill:o===r?"#FF4085":"none"}),Object(y.jsx)(j.a,{display:{base:"none",lg:"block"},fontWeight:o===r?"bold":"normal",children:n})]})})})};return Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(u.a,{direction:"column",justify:"space-between",alignItems:{base:"center",lg:"start"},w:{base:"80px",md:"100px",lg:"360px"},bg:"black.400",h:"100vh",position:"fixed",p:{base:"6",lg:"10"},children:[Object(y.jsxs)(b.a,{w:{lg:"full"},children:[Object(y.jsx)(b.a,{w:"-webkit-fit-content",cursor:"pointer",onClick:function(){return window.location.href="/home"},children:Object(y.jsx)(x.a,{src:p,alt:"relm",w:"10",h:"10"})}),Object(y.jsxs)(b.a,{px:{base:"0",lg:"10"},mt:"50px",children:[t?k?Object(y.jsx)(A,{name:null===k||void 0===k?void 0:k.name,logo:null===k||void 0===k?void 0:k.logo}):Object(y.jsxs)(u.a,{mb:"6",display:"flex",alignItems:"center",experimental_spaceX:"2",children:[Object(y.jsx)(V.a,{w:{base:"10",lg:"8"},h:{base:"10",lg:"8"},rounded:"full"}),Object(y.jsx)(V.a,{rounded:"xl",h:"6",w:"20",display:{base:"none",lg:"block"}})]}):Object(y.jsx)(y.Fragment,{}),Object(y.jsxs)(m.a,{onClick:function(){var e=t?"/manage/community/".concat(t,"/new/event"):"/new/event";window.location.href=e},_hover:{bg:"#DD3370"},transitionDuration:"200ms",_focus:{},_active:{},size:"sm",py:"5",w:{base:"10",lg:"full"},rounded:{base:"full",lg:"xl"},color:"white",bg:"brand.primary",children:[Object(y.jsx)(j.a,{display:{base:"none",lg:"block"},children:"Create new event"}),Object(y.jsx)(b.a,{display:{base:"block",lg:"none"},children:Object(y.jsx)(T.a,{})})]}),Object(y.jsx)(u.a,{alignItems:{base:"center",lg:"start"},mt:"8",direction:"column",experimental_spaceY:"5",children:_.map((function(e,t){return Object(y.jsx)(I,Object(B.a)({},e),t)}))})]})]}),Object(y.jsx)(u.a,{p:{base:"0",md:"2"},w:{base:"-webkit-fit-content",lg:"full"},bg:"whiteAlpha.300",rounded:"full",alignItems:"center",children:Object(y.jsxs)(Q.a,{children:[Object(y.jsx)(Q.b,{overflow:"clip",children:Object(y.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(y.jsx)(K.a,{size:"md",src:null===h||void 0===h?void 0:h.avatar_url,name:null===h||void 0===h?void 0:h.username}),Object(y.jsxs)(b.a,{display:{base:"none",lg:"block"},children:[Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===h||void 0===h?void 0:h.username}),Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:null===h||void 0===h?void 0:h.email})]})]})}),Object(y.jsx)(Q.d,{bg:"brand.secondary",m:"2",borderColor:"gray.700",color:"white",children:Object(y.jsx)(Q.c,{_hover:{bg:"whiteAlpha.50"},_focus:{bg:"whiteAlpha.50"},onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.auth.signOut();case 2:window.location.href="/",O(void 0),localStorage.removeItem("user"),localStorage.removeItem("email");case 6:case"end":return e.stop()}}),e)}))),children:"Sign out"})})]})})]}),Object(y.jsx)(b.a,{w:{base:"0",md:"100px",lg:"360px"},bg:"pink",h:"full",minH:"100vh"})]})},ee=n(239),te=n(240);var ne=function(e){var t=e.children,n=e.communityId,a=Object(r.useState)(!1),o=Object(d.a)(a,2),c=o[0],i=o[1];return Object(y.jsxs)(u.a,{children:[Object(y.jsx)(b.a,{zIndex:2,display:{base:c?"block":"none",md:"block"},children:Object(y.jsx)($,{communityId:n})}),Object(y.jsxs)(b.a,{p:{base:"8",md:"10"},bg:"brand.secondary",w:"full",minH:"100vh",color:"white",children:[Object(y.jsxs)(u.a,{display:{base:"flex",md:"none"},m:"-4",justify:"space-between",mb:"4",alignItems:"center",children:[Object(y.jsx)(x.a,{src:p,alt:"relm",w:"10",h:"10",ml:"1",mt:"2"}),Object(y.jsx)(b.a,{cursor:"pointer",onClick:function(){return i(!c)},rounded:"full",p:"2",_hover:{bg:"whiteAlpha.200"},children:c?Object(y.jsx)(ee.a,{}):Object(y.jsx)(te.a,{})})]}),t]})]})};var re=function(e){var t=e.id,n=e.name,a=e.description,o=e.date,c=e.image,i=e.community,h=e.audience,p=Object(r.useState)(void 0),f=Object(d.a)(p,2),O=f[0],g=f[1];Object(r.useEffect)((function(){i&&v()}),[]);var v=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("communities").select("id, name, logo").eq("id",i).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:g(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{direction:"column",border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"300px"},onClick:function(){window.location.href="/manage/event/".concat(t)},children:[Object(y.jsx)(L.a,{ratio:1920/1080,w:"full",children:Object(y.jsx)(x.a,{src:c,alt:n,rounded:"lg"})}),Object(y.jsxs)(u.a,{direction:"column",justify:"space-between",h:"full",children:[Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{fontSize:"xl",fontWeight:"bold",mt:"4",children:n}),Object(y.jsxs)(u.a,{fontSize:"xs",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(y.jsx)(M.a,{size:"14px"}),Object(y.jsx)(j.a,{children:"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.month-1]," ").concat(o.date,", ").concat(o.time," GMT+5:30")})]}),Object(y.jsxs)(u.a,{mt:"1",fontSize:"xs",experimental_spaceX:"1.5",color:"white",alignItems:"center",children:[Object(y.jsx)(R.a,{size:"14px"}),Object(y.jsx)(j.a,{children:h})]}),Object(y.jsx)(j.a,{mt:"4",children:a})]}),Object(y.jsx)(b.a,{children:Object(y.jsxs)(u.a,{mt:"4",mb:"2",justify:"space-between",mr:"2",children:[O?Object(y.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(y.jsx)(x.a,{src:O.logo,alt:O.name,w:"5",h:"5",rounded:"base"}),Object(y.jsx)(j.a,{fontWeight:"medium",fontSize:"sm",children:O.name})]}):Object(y.jsx)(b.a,{}),Object(y.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Manage"})]})})]})]})},ae=function(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear();return console.log(n,a,r),e.date>=n&&e.month>=r&&e.year>=a};function oe(){for(var e=[[0,4,"Good Night"],[5,11,"Good Morning"],[12,17,"Good Afternoon"],[18,24,"Good Night"]],t=(new Date).getHours(),n=0;n<e.length;n++)if(t>=e[n][0]&&t<=e[n][1])return e[n][2]}var ce=function(){var e=q(),t=e.user,n=e.setUser,a=Object(r.useState)(void 0),o=Object(d.a)(a,2),c=o[0],i=o[1],h=Object(r.useState)(void 0),p=Object(d.a)(h,2),x=p[0],O=p[1];Object(r.useEffect)((function(){C(),k(),g()}),[]);var g=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:a=[],o=[],n.forEach((function(e){ae(e.date)?a.push(e):o.push(e)})),O(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),v=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{justify:"space-between",mt:"6",alignItems:"center",children:[Object(y.jsx)(f.b,{to:"/events",children:Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"UPCOMING EVENTS"})}),Object(y.jsx)(f.b,{to:"/new/event",children:Object(y.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(y.jsx)(T.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),Object(y.jsx)(u.a,{wrap:"wrap",mt:"4",children:x?null===x||void 0===x?void 0:x.map((function(e,t){return Object(y.jsx)(re,Object(B.a)({},e),t)})):Object(y.jsx)(y.Fragment,{})})]})},k=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 4:if(t=e.sent,n=t.data,!(r=t.error)){e.next=9;break}throw r;case 9:i(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("users").select("username, avatar_url, email").eq("email",localStorage.getItem("email")).single();case 4:if(t=e.sent,r=t.data,!(a=t.error)){e.next=9;break}throw a;case 9:n(r),localStorage.setItem("user",JSON.stringify({username:r.username,avatar_url:r.avatar_url,email:r.email})),console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(ne,{children:Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(j.a,{color:"whiteAlpha.500",fontSize:{base:"sm",md:"lg"},children:[oe(),","]}),Object(y.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===t||void 0===t?void 0:t.username}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"}),Object(y.jsxs)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:[Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"COMMUNITIES"}),Object(y.jsx)(f.b,{to:"/new/community",children:Object(y.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(y.jsx)(T.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),(null===c||void 0===c?void 0:c.length)>0?Object(y.jsx)(u.a,{mt:"4",wrap:"wrap",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(y.jsx)(H,Object(B.a)({},e),t)}))}):c?Object(y.jsx)(u.a,{color:"whiteAlpha.600",my:"8",textAlign:"center",justify:"center",children:"\ud83d\udc1d Click on create to add communities"}):Object(y.jsx)(y.Fragment,{}),(null===x||void 0===x?void 0:x.length)>0?Object(y.jsx)(v,{}):Object(y.jsx)(y.Fragment,{})]})})},ie=n(235),se=n(260),le=n(244),de=n(241),ue=n(242),be=n(243),je=n(245),me=n(66),he=n.n(me);var pe=function(){var e=["https://ik.imagekit.io/86h5mrsjotwk/defaultCommunityLogo_gUich_dto.svg?updatedAt=1633160835413","https://ik.imagekit.io/86h5mrsjotwk/dc-3_PXKqFbob4Lj.svg?updatedAt=1633165287477","https://ik.imagekit.io/86h5mrsjotwk/dc-2_7d7-btPTg.svg?updatedAt=1633165286592","https://ik.imagekit.io/86h5mrsjotwk/dc-1_JT81iTWJQGq.svg?updatedAt=1633165286130"],t=q().user,n=Object(r.useState)(e[0]),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(""),h=Object(d.a)(i,2),p=h[0],f=h[1],O=Object(r.useState)(""),g=Object(d.a)(O,2),v=g[0],k=g[1],C=Object(r.useState)(!1),S=Object(d.a)(C,2),W=S[0],E=S[1],D=Object(r.useState)(!1),F=Object(d.a)(D,2),B=F[0],N=F[1],X=Object(_.a)(),T=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,N(!0),e.next=7,he.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),c(r.data.url),H(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),L=Object(ie.a)(),R=L.isOpen,M=L.onOpen,H=L.onClose,G=function(){var e=Object(l.a)(s.a.mark((function e(n,r,a){var o,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>3)){e.next=24;break}return c(a),e.prev=2,E(!0),o={name:n,description:r,logo:a,createdBy:[null===t||void 0===t?void 0:t.email]},e.next=7,w.from("communities").upsert(o).single();case 7:if(i=e.sent,l=i.data,!(d=i.error)){e.next=12;break}throw d;case 12:X({title:"Success",position:"bottom",description:"Community created successfully!",status:"success",duration:5e3,isClosable:!0}),setTimeout((function(){window.location.href="/manage/community/".concat(l.id)}),1e3),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),X({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,E(!1),e.finish(19);case 22:e.next=25;break;case 24:X({title:"Error",position:"bottom",description:"Name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(y.jsxs)(ne,{children:[Object(y.jsxs)(se.a,{isOpen:R,onClose:H,children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(y.jsx)(se.f,{children:"Choose a logo"}),Object(y.jsx)(se.c,{}),Object(y.jsx)(se.b,{children:Object(y.jsxs)(u.a,{wrap:"wrap",children:[Object(y.jsx)(u.a,{cursor:"pointer",border:"2px",justify:"center",alignItems:"center",_hover:{borderColor:"whiteAlpha.50"},borderColor:"transparent",mb:"3",mr:"3",w:"24",h:"24",rounded:"xl",bg:"whiteAlpha.300",onClick:function(){document.getElementById("file").click()},children:Object(y.jsx)(de.a,{size:"30px"})}),e.map((function(e,t){return Object(y.jsx)(b.a,{cursor:"pointer",onClick:function(){c(e)},children:Object(y.jsx)(x.a,{border:"4px",borderColor:o===e?"brand.primary":"transparent",mb:"3",mr:"3",src:e,w:"24",h:"24",rounded:"xl"})},t)}))]})}),Object(y.jsx)(A.a,{type:"file",id:"file",accept:"image/*",display:"none",onChange:function(e){return T(e.target.files[0])}}),Object(y.jsx)(se.e,{children:Object(y.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:H,children:B?Object(y.jsx)(I.a,{}):Object(y.jsx)(y.Fragment,{children:"Done"})})})]})]}),Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"4",children:[Object(y.jsx)(b.a,{cursor:"pointer",p:"2",onClick:function(){window.location.href="/home"},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(y.jsx)(ue.a,{})}),Object(y.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Create Community"})]}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"}),Object(y.jsxs)(u.a,{mt:"6",w:{base:"full",md:"80%"},direction:{base:"column",md:"row"},children:[Object(y.jsxs)(b.a,{minW:"24",mr:"6",mb:"4",children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mb:"1",children:"Logo"}),Object(y.jsxs)(b.a,{position:"relative",w:"-webkit-fit-content",children:[Object(y.jsx)(b.a,{position:"absolute",bg:"blackAlpha.500",p:"2",cursor:"pointer",_hover:{bg:"blackAlpha.600"},transitionDuration:"200ms",roundedTopStart:"xl",bottom:"0",right:"0",onClick:M,children:Object(y.jsx)(be.a,{size:"18px"})}),Object(y.jsx)(x.a,{src:o,w:"24",h:"24",rounded:"lg"})]})]}),Object(y.jsxs)(b.a,{w:"full",children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Name *"}),Object(y.jsx)(A.a,{w:{base:"full",md:"80%",lg:"70%"},type:"text",mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Community name",onChange:function(e){return f(e.target.value)}}),Object(y.jsx)(j.a,{color:"white",mt:"4",fontWeight:"medium",fontSize:"sm",children:"Description"}),Object(y.jsx)(le.a,{w:{base:"full",md:"80%",lg:"70%"},type:"email",mt:"1.5",p:"4",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe your community",onChange:function(e){return k(e.target.value)}}),Object(y.jsx)(u.a,{mt:"6",justify:"end",w:{base:"full",md:"80%",lg:"70%"},children:Object(y.jsx)(m.a,{display:"flex",float:"right",rounded:"lg",w:W?"200px":"auto",_focus:{},_active:{},color:"black",onClick:function(){return G(p,v,o)},children:W?Object(y.jsx)(I.a,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(je.a,{})," ",Object(y.jsx)(j.a,{ml:"2",children:"Create Community"})]})})})]})]})]})]})},xe=n(247);var fe=function(e){var t=e.id,n=e.communityName,a=e.communityDescription,o=e.communityLogo,c=e.close,i=["https://ik.imagekit.io/86h5mrsjotwk/defaultCommunityLogo_gUich_dto.svg?updatedAt=1633160835413","https://ik.imagekit.io/86h5mrsjotwk/dc-3_PXKqFbob4Lj.svg?updatedAt=1633165287477","https://ik.imagekit.io/86h5mrsjotwk/dc-2_7d7-btPTg.svg?updatedAt=1633165286592","https://ik.imagekit.io/86h5mrsjotwk/dc-1_JT81iTWJQGq.svg?updatedAt=1633165286130"],h=q().user,p=Object(r.useState)(o),f=Object(d.a)(p,2),O=f[0],g=f[1],v=Object(r.useState)(n),k=Object(d.a)(v,2),C=k[0],S=k[1],z=Object(r.useState)(a),W=Object(d.a)(z,2),E=W[0],D=W[1],F=Object(r.useState)(!1),B=Object(d.a)(F,2),N=B[0],X=B[1],T=Object(r.useState)(!1),L=Object(d.a)(T,2),R=L[0],M=L[1],H=Object(_.a)(),G=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,M(!0),e.next=7,he.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),g(r.data.url),Y(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,M(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),J=Object(ie.a)(),P=J.isOpen,U=J.onOpen,Y=J.onClose,V=function(){return Object(y.jsxs)(se.a,{isOpen:P,onClose:Y,children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(y.jsx)(se.f,{children:"Choose a logo"}),Object(y.jsx)(se.c,{}),Object(y.jsx)(se.b,{children:Object(y.jsxs)(u.a,{wrap:"wrap",children:[Object(y.jsx)(u.a,{cursor:"pointer",border:"2px",justify:"center",alignItems:"center",_hover:{borderColor:"whiteAlpha.50"},borderColor:"transparent",mb:"3",mr:"3",w:"24",h:"24",rounded:"xl",bg:"whiteAlpha.300",onClick:function(){document.getElementById("file").click()},children:Object(y.jsx)(de.a,{size:"30px"})}),i.map((function(e,t){return Object(y.jsx)(b.a,{cursor:"pointer",onClick:function(){g(e)},children:Object(y.jsx)(x.a,{border:"4px",borderColor:O===e?"brand.primary":"transparent",mb:"3",mr:"3",src:e,w:"24",h:"24",rounded:"xl"})},t)}))]})}),Object(y.jsx)(A.a,{type:"file",id:"file",accept:"image/*",display:"none",onChange:function(e){return G(e.target.files[0])}}),Object(y.jsx)(se.e,{children:Object(y.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:Y,children:R?Object(y.jsx)(I.a,{}):Object(y.jsx)(y.Fragment,{children:"Done"})})})]})]})},Q=function(){var e=Object(l.a)(s.a.mark((function e(n,r,a){var o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>3)){e.next=24;break}return g(a),e.prev=2,X(!0),o={id:t,name:n,description:r,logo:a,createdBy:[null===h||void 0===h?void 0:h.email]},e.next=7,w.from("communities").upsert(o,{returning:"minimal"});case 7:if(i=e.sent,!(l=i.error)){e.next=11;break}throw l;case 11:H({title:"Success",position:"bottom",description:"Community created successfully!",status:"success",duration:5e3,isClosable:!0}),c(),window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),H({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,X(!1),e.finish(19);case 22:e.next=25;break;case 24:H({title:"Error",position:"bottom",description:"Name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{mt:"6",w:"full",direction:{base:"column",md:"row"},color:"white",children:[Object(y.jsx)(V,{}),Object(y.jsxs)(b.a,{minW:"24",mr:"6",mb:"4",children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mb:"1",children:"Logo"}),Object(y.jsxs)(b.a,{position:"relative",w:"-webkit-fit-content",children:[Object(y.jsx)(b.a,{position:"absolute",bg:"blackAlpha.500",p:"2",cursor:"pointer",_hover:{bg:"blackAlpha.600"},transitionDuration:"200ms",roundedTopStart:"xl",bottom:"0",right:"0",onClick:U,children:Object(y.jsx)(be.a,{size:"18px"})}),Object(y.jsx)(x.a,{src:O,w:"24",h:"24",rounded:"lg"})]})]}),Object(y.jsxs)(b.a,{w:"full",children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Name *"}),Object(y.jsx)(A.a,{value:C,w:"full",type:"text",mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Community name",onChange:function(e){return S(e.target.value)}}),Object(y.jsx)(j.a,{color:"white",mt:"4",fontWeight:"medium",fontSize:"sm",children:"Description"}),Object(y.jsx)(le.a,{value:E,w:"full",type:"email",mt:"1.5",p:"4",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe your community",onChange:function(e){return D(e.target.value)}}),Object(y.jsx)(u.a,{mt:"6",justify:"end",w:"full",children:Object(y.jsx)(m.a,{display:"flex",float:"right",rounded:"lg",w:N?"100px":"auto",_focus:{},_active:{},color:"black",onClick:function(){return Q(C,E,O)},children:N?Object(y.jsx)(I.a,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(je.a,{})," ",Object(y.jsx)(j.a,{ml:"2",children:"Save"})]})})})]})]})},Oe=n(246);var ge=function(e){var t=e.username,n=e.communityName,r=e.link,a=Object(S.f)();return Object(y.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(y.jsx)(b.a,{cursor:"pointer",onClick:function(){r?window.location.href=r:a.goBack()},children:Object(y.jsx)(ue.a,{size:"18px"})}),Object(y.jsxs)(Oe.a,{color:"white",children:[Object(y.jsx)(Oe.b,{children:Object(y.jsx)(Oe.c,{href:"/home",children:t})}),Object(y.jsx)(Oe.b,{children:Object(y.jsx)(Oe.c,{href:"#",children:n})})]})]})};var ve=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),p=h[0],x=h[1],O=q().user,g=Object(ie.a)(),v=g.isOpen,k=g.onOpen,C=g.onClose;Object(r.useEffect)((function(){A(),S()}),[]);var S=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).eq("community",t).order("created_at",{ascending:!1});case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:o=[],c=[],r.forEach((function(e){ae(e.date)?o.push(e):c.push(e)})),x(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),_=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:[Object(y.jsx)(f.b,{to:"/manage/community/".concat(t,"/events"),children:Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"UPCOMING EVENTS"})}),Object(y.jsx)(f.b,{to:"/manage/community/".concat(t,"/new/event"),children:Object(y.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(y.jsx)(T.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),(null===p||void 0===p?void 0:p.length)>0?null===p||void 0===p?void 0:p.map((function(e,t){return Object(y.jsx)(u.a,{wrap:"wrap",mt:"4",children:Object(y.jsx)(re,Object(B.a)({},e),t)})})):p?Object(y.jsx)(u.a,{color:"whiteAlpha.600",my:"10",justify:"center",textAlign:"center",children:"\ud83d\udc1d No upcoming events"}):Object(y.jsx)(y.Fragment,{})]})},A=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:c(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(ne,{communityId:t,children:[Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(se.a,{isOpen:v,onClose:C,size:"xl",children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{bg:"#1D2023",children:[Object(y.jsxs)(se.f,{color:"white",children:["Settings ",Object(y.jsx)(se.c,{color:"white"})]}),Object(y.jsx)(se.b,{px:"8",pb:"8",children:Object(y.jsx)(fe,{communityName:null===o||void 0===o?void 0:o.name,communityDescription:null===o||void 0===o?void 0:o.description,communityLogo:null===o||void 0===o?void 0:o.logo,id:null===o||void 0===o?void 0:o.id,close:C})})]})]}),Object(y.jsx)(ge,{link:"/home",username:null===O||void 0===O?void 0:O.username,communityName:null===o||void 0===o?void 0:o.name}),Object(y.jsxs)(u.a,{justify:"space-between",alignItems:"end",children:[Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===o||void 0===o?void 0:o.name}),(null===o||void 0===o?void 0:o.description)?Object(y.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},fontWeight:"thin",children:null===o||void 0===o?void 0:o.description}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsx)(b.a,{_hover:{bg:"whiteAlpha.200"},rounded:"full",p:"2",cursor:"pointer",onClick:function(){return k()},children:Object(y.jsx)(xe.a,{size:"20px"})})]}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"})]}),p?Object(y.jsx)(_,{}):Object(y.jsx)(y.Fragment,{})]})};var we=function(e){var t=e.match.params.id,n=Object(r.useState)("Upcoming"),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),p=h[0],x=h[1],f=Object(r.useState)(void 0),O=Object(d.a)(f,2),g=O[0],v=O[1],k=Object(r.useState)(void 0),C=Object(d.a)(k,2),S=C[0],_=C[1],A=q().user;Object(r.useEffect)((function(){t&&E(),I()}),[]);var I=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,i,l,d,u,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=16;break}return e.next=4,w.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).eq("community",t).order("created_at",{ascending:!1});case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:o=[],c=[],r.forEach((function(e){ae(e.date)?o.push(e):c.push(e)})),v(c),x(o),e.next=28;break;case 16:return e.next=18,w.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 18:if(i=e.sent,l=i.data,!(d=i.error)){e.next=23;break}throw d;case 23:u=[],b=[],l.forEach((function(e){ae(e.date)?u.push(e):b.push(e)})),v(b),x(u);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}(),W=function(e){var t=e.name;return Object(y.jsx)(b.a,{py:"2",px:"4",borderBottom:"2px",onClick:function(){return c(t)},transitionDuration:"200ms",cursor:"pointer",color:o===t?"brand.primary":"whiteAlpha.700",_hover:{color:o===t?"brand.primary":"white"},borderColor:o===t?"brand.primary":"transparent",children:Object(y.jsx)(j.a,{children:t})})},E=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:_(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(ne,{communityId:t,children:Object(y.jsxs)(b.a,{children:[t?Object(y.jsx)(ge,{username:null===A||void 0===A?void 0:A.username,communityName:null===S||void 0===S?void 0:S.name}):Object(y.jsx)(y.Fragment,{}),Object(y.jsxs)(u.a,{alignItems:"center",justify:"space-between",children:[Object(y.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Events"}),Object(y.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(y.jsx)(T.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},onClick:function(){var e=t?"/manage/community/".concat(t,"/new/event"):"/new/event";window.location.href=e},children:"Create"})]}),Object(y.jsx)(u.a,{mt:"3",experimental_spaceX:"3",children:["Upcoming","Done"].map((function(e,t){return Object(y.jsx)(W,{name:e})}))}),Object(y.jsx)(z.a,{color:"white",opacity:"0.2"}),Object(y.jsxs)(u.a,{wrap:"wrap",mt:"6",children:["Upcoming"===o?null===p||void 0===p?void 0:p.map((function(e,t){return Object(y.jsx)(re,Object(B.a)({},e),t)})):Object(y.jsx)(y.Fragment,{}),"Done"===o?null===g||void 0===g?void 0:g.map((function(e,t){return Object(y.jsx)(re,Object(B.a)({},e),t)})):Object(y.jsx)(y.Fragment,{})]})]})})},ye=n(249),ke=n(248),Ce=n(79),Se=n.n(Ce);var _e=function(e){var t=e.match.params.id,n=[{name:"\ud83d\udcbb Virtual",enum:"Virtual",placeholder:"Link to event"},{name:"\ud83c\udf0d In Person",enum:"InPerson",placeholder:"Location to event"}],a=q().user,o=Object(r.useState)(n[0]),c=Object(d.a)(o,2),i=c[0],h=c[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),O=f[0],g=f[1],v=Object(r.useState)("https://ik.imagekit.io/86h5mrsjotwk/defaultEvent_GGD_P8xy-jP.png?updatedAt=1633174215871"),k=Object(d.a)(v,2),C=k[0],W=k[1],E=Object(r.useState)(""),D=Object(d.a)(E,2),F=D[0],N=D[1],X=Object(r.useState)({}),T=Object(d.a)(X,2),R=T[0],H=T[1],G=Object(r.useState)(""),J=Object(d.a)(G,2),P=J[0],U=J[1],Y=Object(r.useState)(""),V=Object(d.a)(Y,2),Q=V[0],K=V[1],Z=Object(r.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],te=$[1],re=Object(r.useState)(void 0),ae=Object(d.a)(re,2),oe=ae[0],ce=ae[1],ie=Object(r.useState)("None"),se=Object(d.a)(ie,2),de=se[0],be=se[1],me=Object(r.useState)(void 0),pe=Object(d.a)(me,2),xe=pe[0],fe=pe[1],Oe=Object(r.useState)(!1),ve=Object(d.a)(Oe,2),we=ve[0],Ce=ve[1],_e=Object(_.a)(),Ae=Object(S.f)();Object(r.useEffect)((function(){t&&We(),ze()}),[]);var Ie=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,Ce(!0),e.next=7,he.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),W(r.data.url),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.prev=15,Ce(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("communities").select("id, name").contains("createdBy",[localStorage.getItem("email")]);case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:fe(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:ce(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(F.length>3)){e.next=41;break}if(W(C),e.prev=2,te(!0),n={},!t){e.next=15;break}return n={name:F,description:P,content:Q,date:R,link:O,image:C,admin:localStorage.getItem("email"),platform:i.enum,createdBy:[localStorage.getItem("email")],community:t},e.next=9,w.from("communities").select("id, events").eq("id",t).single();case 9:return r=e.sent,a=r.data,e.next=13,w.from("communities").upsert({id:a.id,events:a.events+1},{returning:"minimal"}).single();case 13:e.next=16;break;case 15:n={name:F,description:P,content:Q,date:R,link:O,image:C,admin:localStorage.getItem("email"),platform:i.enum,createdBy:[localStorage.getItem("email")],community:"None"===de?null:de};case 16:return e.next=18,w.from("events").upsert(n).single();case 18:if(o=e.sent,"None"===de){e.next=26;break}return e.next=22,w.from("communities").select("id, events").eq("id",de).single();case 22:return c=e.sent,l=c.data,e.next=26,w.from("communities").upsert({id:l.id,events:l.events+1},{returning:"minimal"});case 26:if(!o.error){e.next=28;break}throw o.error;case 28:_e({title:"Success",position:"bottom",description:"Event created successfully!",status:"success",duration:5e3,isClosable:!0}),setTimeout((function(){window.location.href="/manage/event/".concat(o.data.id)}),1e3),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.log(e.t0),_e({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 36:return e.prev=36,te(!1),e.finish(36);case 39:e.next=42;break;case 41:_e({title:"Error",position:"bottom",description:"Event name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 42:case"end":return e.stop()}}),e,null,[[2,32,36,39]])})));return function(){return e.apply(this,arguments)}}(),De=function(){return Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",mb:"4",children:[Object(y.jsx)(ke.a,{})," ",Object(y.jsx)(j.a,{children:"Where will it happen? *"})]}),Object(y.jsx)(u.a,{p:"1.5",bg:"whiteAlpha.200",w:"-webkit-fit-content",experimental_spaceX:"3",rounded:"lg",children:n.map((function(e,t){return Object(y.jsx)(b.a,{onClick:function(){h(e),g("")},cursor:"pointer",color:e.name===i.name?"white":"whiteAlpha.800",_hover:{color:"white"},transitionDuration:"200ms",bg:e.name===i.name?"whiteAlpha.300":"transparent",px:"4",py:"1",rounded:"base",children:e.name},t)}))})]})};return Object(y.jsxs)(ne,{communityId:t,children:[Object(y.jsxs)(b.a,{children:[t?Object(y.jsx)(ge,{username:null===a||void 0===a?void 0:a.username,communityName:null===oe||void 0===oe?void 0:oe.name}):Object(y.jsx)(y.Fragment,{}),Object(y.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"4",children:[t?Object(y.jsx)(y.Fragment,{}):Object(y.jsx)(b.a,{cursor:"pointer",p:"2",onClick:function(){Ae.goBack()},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(y.jsx)(ue.a,{})}),Object(y.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Create Event"})]}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"})]}),Object(y.jsxs)(u.a,{alignItems:"center",mt:"6",direction:"column",children:[Object(y.jsx)(L.a,{ratio:1920/1080,w:{base:"full",md:"80%",lg:"70%"},shadow:"xl",children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(x.a,{rounded:"lg",src:C}),Object(y.jsx)(m.a,{position:"absolute",bottom:"0",left:"0",m:"4",size:"sm",bg:"blackAlpha.600",border:"1px",onClick:function(){return document.getElementById("file").click()},borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200",bg:"blackAlpha.800"},_focus:{},_active:{bg:"blackAlpha.700"},children:we?Object(y.jsx)(I.a,{}):Object(y.jsx)(y.Fragment,{children:"Change cover photo"})})]})}),Object(y.jsx)(A.a,{type:"file",accept:"image/*",id:"file",display:"none",onChange:function(e){return Ie(e.target.files[0])}}),Object(y.jsx)(b.a,{w:{base:"full",md:"80%",lg:"70%"},mt:"4",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Ee()},children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Event Name *"}),Object(y.jsx)(A.a,{w:"full",onChange:function(e){return N(e.target.value)},type:"text",mt:"1.5",py:"5",isRequired:!0,px:"0",rounded:"none",color:"white",fontSize:"xl",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"1px",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Designing Session"}),Object(y.jsx)(De,{}),Object(y.jsx)(A.a,{w:"full",type:"text",mt:"3",py:"5",rounded:"lg",color:"white",isRequired:!0,value:O,onChange:function(e){return g(e.target.value)},_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:i.placeholder}),Object(y.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",children:[Object(y.jsx)(M.a,{})," ",Object(y.jsx)(j.a,{children:"When will it happen? *"})]}),Object(y.jsxs)(u.a,{experimental_spaceX:"4",mt:"2",children:[Object(y.jsx)(A.a,{w:"full",type:"date",placeholder:"Date",onChange:function(e){var t=e.target.value;console.log(t);var n=t.split("-");H(Object(B.a)(Object(B.a)({},R),{},{date:n[2],month:n[1],year:n[0]}))},mt:"1.5",py:"5",rounded:"lg",isRequired:!0,color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}}),Object(y.jsx)(A.a,{w:{sm:"70%",lg:"40%"},type:"time",placeholder:"Time",onChange:function(e){H(Object(B.a)(Object(B.a)({},R),{},{time:Se()(e.target.value,"HH:mm").format("hh:mm A")}))},mt:"1.5",isRequired:!0,py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}})]}),Object(y.jsx)(j.a,{mt:"1",color:"whiteAlpha.500",children:"* Date and time is in GMT+5:30"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"6",children:"Description"}),Object(y.jsx)(A.a,{w:"full",type:"text",onChange:function(e){return U(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe about your event in brief"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Content"}),Object(y.jsx)(le.a,{w:"full",onChange:function(e){return K(e.target.value)},type:"text",mt:"1.5",py:"3",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Write about your event"}),oe?Object(y.jsx)(y.Fragment,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Community"}),Object(y.jsxs)(ye.a,{color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},mt:"2",onChange:function(e){return be(e.target.value)},children:[Object(y.jsx)("option",{style:{color:"white",backgroundColor:"black"},value:null,children:"None"}),null===xe||void 0===xe?void 0:xe.map((function(e,t){return Object(y.jsx)("option",{style:{color:"white",backgroundColor:"black"},value:e.id,children:e.name},t)}))]})]}),Object(y.jsx)(m.a,{color:"black",float:"right",mt:"6",type:"submit",rounded:"lg",_focus:{},_active:{},leftIcon:ee?Object(y.jsx)(I.a,{}):Object(y.jsx)(je.a,{size:"20px"}),children:ee?Object(y.jsx)(y.Fragment,{}):Object(y.jsx)(y.Fragment,{children:"Create Event"})})]})})]})]})},Ae=n(251),Ie=n(252),ze=n(253),We=n(266),Ee=n(254),De=n(250);var Fe=function(e){var t=e.audience;return e.communityId,Object(y.jsx)(b.a,{border:"1px",rounded:"xl",mt:"4",borderColor:"whiteAlpha.400",children:Object(y.jsxs)(De.a,{variant:"simple",colorScheme:"whiteAlpha",children:[Object(y.jsx)(De.e,{children:Object(y.jsxs)(De.f,{children:[Object(y.jsx)(De.d,{color:"whiteAlpha.600",children:"Name"}),Object(y.jsx)(De.d,{color:"whiteAlpha.600",display:{base:"none",md:"table-cell"},children:"Email"}),Object(y.jsx)(De.d,{color:"whiteAlpha.600",children:"Events"})]})}),Object(y.jsx)(De.b,{children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((function(e,t){return Object(y.jsxs)(De.f,{children:[Object(y.jsx)(De.c,{maxW:{base:"100px",md:"200px"},children:e.name}),Object(y.jsx)(De.c,{display:{base:"none",md:"table-cell"},maxW:"200px",children:e.email}),Object(y.jsx)(De.c,{children:e.events.length})]},t)})):Object(y.jsx)(j.a,{py:"2",px:"6",color:"whiteAlpha.600",children:"No guests"})})]})})};var Be=function(e){var t=e.id,n=e.admin,a=e.email,o=Object(r.useState)(void 0),c=Object(d.a)(o,2),i=c[0],h=c[1],p=Object(ie.a)(),x=p.isOpen,f=p.onOpen,O=p.onClose,g=Object(_.a)();Object(r.useEffect)((function(){C()}),[]);var v=function(){var e=Object(l.a)(s.a.mark((function e(n){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("events").select("id, createdBy").eq("id",t).single();case 3:return r=e.sent,a=r.data,o=[],null===a||void 0===a||a.createdBy.forEach((function(e){e!==n&&o.push(e)})),e.next=9,w.from("events").upsert({id:a.id,createdBy:o},{returning:"minimal"});case 9:window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){return Object(y.jsxs)(se.a,{isOpen:x,onClose:O,children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(y.jsx)(se.c,{}),Object(y.jsx)(se.b,{children:Object(y.jsxs)(u.a,{transitionDuration:"200ms",overflow:"clip",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(y.jsx)(K.a,{size:"md",src:null===i||void 0===i?void 0:i.avatar_url,name:(null===i||void 0===i?void 0:i.username)||a}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===i||void 0===i?void 0:i.username}),Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:i?"xs":"sm",children:a})]})]})}),Object(y.jsxs)(se.e,{children:[Object(y.jsx)(m.a,{size:"sm",bg:"whiteAlpha.300",mr:"2",_hover:{},_active:{},onClick:O,children:"Close"}),Object(y.jsx)(m.a,{size:"sm",bg:"red",_hover:{},_active:{},onClick:function(){a===window.localStorage.getItem("email")?g({title:"Error",position:"bottom",description:"Cannot remove admin from host",status:"error",duration:5e3,isClosable:!0}):v(a)},children:"Remove from host"})]})]})]})},C=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("users").select("username, avatar_url, email").eq("email",a).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:h(n),console.log(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{onClick:function(){n===window.localStorage.getItem("email")&&f()},border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(y.jsx)(k,{}),Object(y.jsx)(K.a,{size:"md",src:null===i||void 0===i?void 0:i.avatar_url,name:(null===i||void 0===i?void 0:i.username)||a}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===i||void 0===i?void 0:i.username}),Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:i?"xs":"sm",children:a})]})]})};var Ne=function(e){var t=e.eventId,n=e.eventName,a=e.eventDescription,o=e.eventImage,c=e.eventPlatform,i=e.eventLink,h=e.eventDate,p=e.eventContent,f=[{name:"\ud83d\udcbb Virtual",enum:"Virtual",placeholder:"Link to event"},{name:"\ud83c\udf0d In Person",enum:"InPerson",placeholder:"Location to event"}],O=Object(r.useState)("Virtual"===c?f[0]:f[1]),g=Object(d.a)(O,2),v=g[0],k=g[1],C=Object(r.useState)(i),S=Object(d.a)(C,2),z=S[0],W=S[1],E=Object(r.useState)(o),D=Object(d.a)(E,2),F=D[0],N=D[1],X=Object(r.useState)(n),q=Object(d.a)(X,2),T=q[0],R=q[1],H=Object(r.useState)(h),G=Object(d.a)(H,2),J=G[0],P=G[1],U=Object(r.useState)(a),Y=Object(d.a)(U,2),V=Y[0],Q=Y[1],K=Object(r.useState)(p),Z=Object(d.a)(K,2),$=Z[0],ee=Z[1],te=Object(r.useState)(!1),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],oe=Object(r.useState)(!1),ce=Object(d.a)(oe,2),ie=ce[0],se=ce[1],de=Object(_.a)(),ue=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,se(!0),e.next=7,he.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),N(r.data.url),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.prev=15,se(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T.length>3)){e.next=24;break}return e.prev=1,ae(!0),{},n={id:t,name:T,description:V,content:$,date:J,link:z,image:F,platform:v.enum},e.next=7,w.from("events").upsert(n,{returning:"minimal"});case 7:if(r=e.sent,!(a=r.error)){e.next=11;break}throw a;case 11:de({title:"Success",position:"bottom",description:"Event updated successfully!",status:"success",duration:5e3,isClosable:!0}),window.location.reload(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),de({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,ae(!1),e.finish(19);case 22:e.next=25;break;case 24:de({title:"Error",position:"bottom",description:"Event name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),me=function(){return Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",mb:"4",children:[Object(y.jsx)(ke.a,{})," ",Object(y.jsx)(j.a,{children:"Where will it happen? *"})]}),Object(y.jsx)(u.a,{p:"1.5",bg:"whiteAlpha.200",w:"-webkit-fit-content",experimental_spaceX:"3",rounded:"lg",children:f.map((function(e,t){return Object(y.jsx)(b.a,{onClick:function(){k(e),W("")},cursor:"pointer",color:e.name===v.name?"white":"whiteAlpha.800",_hover:{color:"white"},transitionDuration:"200ms",bg:e.name===v.name?"whiteAlpha.300":"transparent",px:"4",py:"1",rounded:"base",children:e.name},t)}))})]})};return Object(y.jsxs)(u.a,{alignItems:"center",mt:"6",direction:"column",color:"white",children:[Object(y.jsx)(L.a,{ratio:1920/1080,w:"full",shadow:"xl",children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(x.a,{rounded:"lg",src:F}),Object(y.jsx)(m.a,{position:"absolute",bottom:"0",left:"0",m:"4",size:"sm",bg:"blackAlpha.600",border:"1px",onClick:function(){return document.getElementById("file").click()},borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200",bg:"blackAlpha.800"},_focus:{},_active:{bg:"blackAlpha.700"},children:ie?Object(y.jsx)(I.a,{}):Object(y.jsx)(y.Fragment,{children:"Change cover photo"})})]})}),Object(y.jsx)(A.a,{type:"file",accept:"image/*",id:"file",display:"none",onChange:function(e){return ue(e.target.files[0])}}),Object(y.jsx)(b.a,{w:"full",mt:"4",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),be()},children:[Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Event Name *"}),Object(y.jsx)(A.a,{w:"full",onChange:function(e){return R(e.target.value)},type:"text",value:T,mt:"1.5",py:"5",isRequired:!0,px:"0",rounded:"none",color:"white",fontSize:"xl",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"1px",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Designing Session"}),Object(y.jsx)(me,{}),Object(y.jsx)(A.a,{w:"full",type:"text",mt:"3",py:"5",rounded:"lg",color:"white",isRequired:!0,value:z,onChange:function(e){return W(e.target.value)},_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:v.placeholder}),Object(y.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",children:[Object(y.jsx)(M.a,{})," ",Object(y.jsx)(j.a,{children:"When will it happen? *"})]}),Object(y.jsxs)(u.a,{experimental_spaceX:"4",mt:"2",children:[Object(y.jsx)(A.a,{w:"full",type:"date",defaultValue:h.year+"-"+h.month+"-"+h.date,placeholder:"Date",onChange:function(e){var t=e.target.value;console.log(t);var n=t.split("-");P(Object(B.a)(Object(B.a)({},J),{},{date:n[2],month:n[1],year:n[0]})),console.log(J)},mt:"1.5",py:"5",rounded:"lg",isRequired:!0,color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}}),Object(y.jsx)(A.a,{w:{sm:"70%",lg:"40%"},type:"time",placeholder:"Time",defaultValue:Se()(h.time,"hh:mm A").format("HH:mm"),onChange:function(e){P(Object(B.a)(Object(B.a)({},J),{},{time:Se()(e.target.value,"HH:mm").format("hh:mm A")}))},mt:"1.5",isRequired:!0,py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}})]}),Object(y.jsx)(j.a,{mt:"1",color:"whiteAlpha.500",children:"* Date and time is in GMT+5:30"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"6",children:"Description"}),Object(y.jsx)(A.a,{value:V,w:"full",type:"text",onChange:function(e){return Q(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe about your event in brief"}),Object(y.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Content"}),Object(y.jsx)(le.a,{w:"full",value:$,onChange:function(e){return ee(e.target.value)},type:"text",mt:"1.5",py:"3",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Write about your event"}),Object(y.jsx)(m.a,{color:"black",float:"right",mt:"6",type:"submit",rounded:"lg",_focus:{},_active:{},leftIcon:re?Object(y.jsx)(I.a,{size:"sm"}):Object(y.jsx)(je.a,{size:"20px"}),children:"Update Event"})]})})]})};function Xe(e){if(e)return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.month-1]," ").concat(e.date,", ").concat(e.time," GMT+5:30")}var qe=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),p=h[0],x=h[1],f=Object(r.useState)([]),O=Object(d.a)(f,2),g=O[0],v=O[1],k=Object(Ae.a)("".concat(window.location.origin,"/event/").concat(t)),C=k.hasCopied,E=k.onCopy,D=Object(S.f)(),F=Object(_.a)(),B=Object(r.useState)(!1),N=Object(d.a)(B,2),X=N[0],q=N[1],L=Object(r.useState)(!1),R=Object(d.a)(L,2),H=R[0],G=R[1],J=Object(r.useState)(!1),P=Object(d.a)(J,2),U=P[0],V=P[1],Q=Object(r.useState)(!1),K=Object(d.a)(Q,2),Z=K[0],$=K[1],ee=Object(ie.a)(),te=ee.isOpen,re=ee.onOpen,ae=ee.onClose;Object(r.useEffect)((function(){ce(),oe()}),[]);var oe=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("audience").select("name, email, events").contains("events",[t]);case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:x(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("events").select("id, name, image, link, description, content, date, community, audience, createdBy, admin, isListed, isOpen,platform").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),q(r.isListed),G(r.isOpen),v(r.createdBy),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(!0),{},n={id:t,isOpen:H,isListed:X},console.log(X,H),console.log(n),e.next=8,w.from("events").upsert(n,{returning:"minimal"});case 8:if(r=e.sent,!(a=r.error)){e.next=12;break}throw a;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:return e.prev=17,$(!1),V(!1),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(ie.a)(),n=e.isOpen,r=e.onOpen,a=e.onClose,o=function(){return Object(y.jsxs)(se.a,{isOpen:n,onClose:a,children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(y.jsx)(se.f,{children:"Add host"}),Object(y.jsx)(se.c,{}),Object(y.jsx)(se.b,{children:Object(y.jsx)(A.a,{id:"email",type:"email",_placeholder:{color:"whiteAlpha.500"},placeholder:"Email",_focus:{borderColor:"brand.primary"}})}),Object(y.jsx)(se.e,{children:Object(y.jsx)(m.a,{bg:"brand.primary",_hover:{},_active:{},onClick:Object(l.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=document.getElementById("email").value,!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase())){e.next=18;break}return g.push(document.getElementById("email").value),e.prev=2,e.next=5,w.from("events").upsert({id:t,createdBy:g},{returning:"minimal"});case 5:if(n=e.sent,!(r=n.error)){e.next=9;break}throw r;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:a(),window.location.reload(),e.next=19;break;case 18:F({title:"Error",position:"bottom",description:"Enter a valid email address",status:"error",duration:5e3,isClosable:!0});case 19:case"end":return e.stop()}var o}),e,null,[[2,11]])}))),children:"Add"})})]})]})};return Object(y.jsxs)(u.a,{border:"2px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"whiteAlpha.50",p:"2",justify:"center",borderStyle:"dashed",alignItems:"center",rounded:"xl",w:"full",onClick:r,minH:"14",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(y.jsx)(o,{}),Object(y.jsx)(T.a,{})]})},be=function(){return Object(y.jsxs)(se.a,{size:"3xl",isOpen:te,onClose:ae,children:[Object(y.jsx)(se.g,{}),Object(y.jsxs)(se.d,{bg:"#1D2023",children:[Object(y.jsxs)(se.f,{color:"white",children:["Settings ",Object(y.jsx)(se.c,{color:"white"})]}),Object(y.jsx)(se.b,{px:"8",pb:"8",children:Object(y.jsx)(Ne,{eventId:t,eventName:null===o||void 0===o?void 0:o.name,eventContent:null===o||void 0===o?void 0:o.content,eventDate:null===o||void 0===o?void 0:o.date,eventDescription:null===o||void 0===o?void 0:o.description,eventPlatform:null===o||void 0===o?void 0:o.platform,eventImage:null===o||void 0===o?void 0:o.image,eventLink:null===o||void 0===o?void 0:o.link})})]})]})},je=function(){return Object(y.jsxs)(Ie.a,{children:[Object(y.jsx)(A.a,{cursor:"pointer",transitionDuration:"200ms",onClick:function(){window.open("".concat(window.location.origin,"/event/").concat(t),"_blank")},_hover:{color:"brand.primary"},value:"".concat(window.location.origin,"/event/").concat(t),isReadOnly:!0,rounded:"lg",border:"none",bg:"whiteAlpha.200"}),Object(y.jsx)(ze.a,{onClick:function(){return E()},cursor:"pointer",p:"2",roundedRight:"lg",transitionDuration:"200ms",_hover:{color:"brand.primary"},children:Object(y.jsx)(Y.a,{label:"Copy to clipboard",children:C?Object(y.jsx)(W.a,{}):Object(y.jsx)(Ee.a,{size:"20px"})})})]})};return Object(y.jsxs)(ne,{children:[Object(y.jsx)(b.a,{children:Object(y.jsxs)(u.a,{justify:"space-between",alignItems:"end",children:[Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(u.a,{experimental_spaceX:"3",alignItems:"center",children:[Object(y.jsx)(b.a,{cursor:"pointer",p:"2",w:"10",h:"10",onClick:function(){D.goBack()},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(y.jsx)(ue.a,{})}),Object(y.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===o||void 0===o?void 0:o.name})]}),Object(y.jsxs)(u.a,{fontSize:"xs",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(y.jsx)(M.a,{size:"14px"}),Object(y.jsx)(j.a,{children:Xe(null===o||void 0===o?void 0:o.date)})]}),(null===o||void 0===o?void 0:o.description)?Object(y.jsx)(j.a,{mt:"1",fontSize:{base:"xs",md:"sm"},fontWeight:"thin",children:null===o||void 0===o?void 0:o.description}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsxs)(u.a,{direction:"column",alignItems:"end",experimental_spaceY:"1",children:[Object(y.jsxs)(b.a,{_hover:{bg:"whiteAlpha.200"},rounded:"full",p:"2",cursor:"pointer",onClick:re,children:[Object(y.jsx)(be,{}),Object(y.jsx)(xe.a,{size:"20px"})]}),Object(y.jsxs)(b.a,{display:{base:"none",md:"block"},children:[Object(y.jsx)(j.a,{fontSize:"xs",mb:"1",color:"whiteAlpha.500",children:"Sharable invite link"}),Object(y.jsx)(je,{})]})]})]})}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"}),Object(y.jsxs)(b.a,{display:{base:"block",md:"none"},children:[Object(y.jsx)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"INVITE LINK"})}),Object(y.jsx)(b.a,{mt:"2",children:Object(y.jsx)(je,{})})]}),Object(y.jsx)(u.a,{justify:"space-between",mt:"8",alignItems:"center",children:Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"GUESTS"})}),Object(y.jsx)(Fe,{audience:p}),Object(y.jsx)(u.a,{justify:"space-between",mt:"8",alignItems:"center",children:Object(y.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"HOST & MANAGERS"})}),Object(y.jsxs)(u.a,{mt:"4",wrap:"wrap",children:[null===o||void 0===o?void 0:o.createdBy.map((function(e,n){return Object(y.jsx)(Be,{id:t,admin:null===o||void 0===o?void 0:o.admin,email:e},n)})),window.localStorage.getItem("email")===(null===o||void 0===o?void 0:o.admin)?Object(y.jsx)(de,{}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsxs)(u.a,{direction:"column",mt:"4",children:[Object(y.jsx)(We.a,{w:"-webkit-fit-content",onChange:function(e){q(e.target.checked),V(!0)},isChecked:X,children:"Listed publicly"}),Object(y.jsx)(We.a,{w:"-webkit-fit-content",onChange:function(e){G(e.target.checked),V(!0)},isChecked:H,children:"Registrations open"}),Object(y.jsx)(b.a,{children:Object(y.jsx)(m.a,{display:U?"block":"none",float:"right",size:"sm",mt:"2",minW:"28",onClick:function(){le()},colorScheme:"whiteAlpha",children:Z?Object(y.jsx)(I.a,{size:"sm"}):Object(y.jsx)(y.Fragment,{children:" Save changes"})})})]})]})};var Te=function(e){var t=e.match.params.id,n=q().user,a=Object(r.useState)(void 0),o=Object(d.a)(a,2),c=o[0],i=o[1],u=Object(r.useState)(void 0),m=Object(d.a)(u,2),h=m[0],p=m[1];Object(r.useEffect)((function(){t&&f(),x()}),[]);var x=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=12;break}return e.next=4,w.from("audience").select("name, email, events").contains("communities",[t]).order("created_at",{ascending:!1});case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:i(r),e.next=20;break;case 12:return e.next=14,w.from("audience").select("name, email, events").eq("createdBy",localStorage.getItem("email")).order("created_at",{ascending:!1});case 14:if(o=e.sent,c=o.data,!(l=o.error)){e.next=19;break}throw l;case 19:i(c);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,w.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:p(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(ne,{communityId:t,children:Object(y.jsxs)(b.a,{children:[t?Object(y.jsx)(ge,{username:null===n||void 0===n?void 0:n.username,communityName:null===h||void 0===h?void 0:h.name}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Audience"}),Object(y.jsx)(z.a,{mt:"3",color:"white",opacity:"0.2"}),Object(y.jsx)(Fe,{audience:c,communityId:t})]})})},Le=n(18),Re=n(256),Me=n(255),He=n(257),Ge=n(141),Je=n.n(Ge);n(194);var Pe=function(e){var t=e.email,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1];Object(r.useEffect)((function(){i(),console.log("again")}),[]);var i=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("users").select("username, avatar_url, email").eq("email",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(u.a,{border:"1px",cursor:"pointer",mb:"2",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(y.jsx)(K.a,{size:"sm",src:null===o||void 0===o?void 0:o.avatar_url,name:(null===o||void 0===o?void 0:o.username)||t}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:(null===o||void 0===o?void 0:o.username)?"semibold":"normal",fontSize:"sm",children:(null===o||void 0===o?void 0:o.username)?null===o||void 0===o?void 0:o.username:t}),Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xx-small",children:"Host"})]})]})};var Ue=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=new Je.a.Converter,h=Object(r.useState)(void 0),p=Object(d.a)(h,2),f=p[0],O=p[1],g=Object(r.useState)(!1),v=Object(d.a)(g,2),C=v[0],S=v[1],W=Object(r.useState)(""),E=Object(d.a)(W,2),D=E[0],F=E[1],B=Object(r.useState)(""),N=Object(d.a)(B,2),X=N[0],q=N[1],T=Object(_.a)();Object(r.useEffect)((function(){H(),window.localStorage.getItem("email")&&R()}),[]);var R=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("users").select("username, avatar_url, email").eq("email",window.localStorage.getItem("email")).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:O(n),F(n.username),q(n.email),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.from("events").select("name, description, date, community, image, content, platform, link, isListed, isOpen, createdBy, admin, audience").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,c,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,w.from("audience").select("events, communities").eq("email",X).single();case 4:return n=e.sent,r=n.data,a=[],c=[],r?(r.events.push(t),r.communities.push(null===o||void 0===o?void 0:o.community),a=r.events,c=r.communities):(a=[t],c=[null===o||void 0===o?void 0:o.community]),i={email:X,name:D,events:Object(Le.a)(new Set(a)),communities:Object(Le.a)(new Set(c)),createdBy:null===o||void 0===o?void 0:o.admin},e.next=12,w.from("audience").upsert(i,{returning:"minimal"});case 12:return e.next=14,w.from("audience").select("name, email, events").contains("events",[t]);case 14:return l=e.sent,e.next=17,w.from("events").upsert({id:t,audience:l.data.length},{returning:"minimal"});case 17:if(!(null===o||void 0===o?void 0:o.community)){e.next=23;break}return e.next=20,w.from("audience").select("name, email, events").contains("communities",[null===o||void 0===o?void 0:o.community]);case 20:return d=e.sent,e.next=23,w.from("communities").upsert({id:null===o||void 0===o?void 0:o.community,audience:d.data.length},{returning:"minimal"});case 23:T({title:"Success",position:"bottom",description:"You are successfully registered!",status:"success",duration:5e3,isClosable:!0}),F(""),q(""),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.log(e.t0);case 31:return e.prev=31,S(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,28,31,34]])})));return function(){return e.apply(this,arguments)}}(),J=function(){return Object(y.jsxs)(u.a,{cursor:"default",borderColor:"transparent",transitionDuration:"200ms",overflow:"clip",mb:"4",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",children:[Object(y.jsx)(K.a,{size:"md",src:null===f||void 0===f?void 0:f.avatar_url,name:null===f||void 0===f?void 0:f.username}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===f||void 0===f?void 0:f.username}),Object(y.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:null===f||void 0===f?void 0:f.email})]})]})};return Object(y.jsx)(y.Fragment,{children:o?Object(y.jsx)(y.Fragment,{children:(null===o||void 0===o?void 0:o.isListed)?Object(y.jsx)(u.a,{bg:"brand.secondary",justify:"center",w:"full",children:Object(y.jsxs)(b.a,{minH:"100vh",py:"6",px:{base:"6",md:"12"},maxW:"1100px",w:"full",color:"white",children:[Object(y.jsx)(b.a,{px:{lg:"20"},children:Object(y.jsx)(k,{communityId:null===o||void 0===o?void 0:o.community})}),Object(y.jsxs)(b.a,{mx:"auto",mt:"6",children:[Object(y.jsx)(L.a,{ratio:1920/1080,children:Object(y.jsx)(x.a,{src:null===o||void 0===o?void 0:o.image,rounded:"xl"})}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(j.a,{fontWeight:"bold",fontSize:"3xl",mt:"4",children:null===o||void 0===o?void 0:o.name}),Object(y.jsxs)(u.a,{fontSize:"sm",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(y.jsx)(M.a,{size:"18px"}),Object(y.jsx)(j.a,{children:Xe(null===o||void 0===o?void 0:o.date)})]}),Object(y.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(y.jsxs)(b.a,{w:"full",children:[Object(y.jsx)(b.a,{mt:"10",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(null===o||void 0===o?void 0:o.isOpen)?G():T({title:"Error",position:"bottom",description:"Event registrations are already closed",status:"Error",duration:5e3,isClosable:!0})},children:[Object(y.jsx)(j.a,{fontSize:"xl",mb:"3",fontWeight:"medium",children:"Register for the event"}),Object(y.jsxs)(u.a,{bg:"whiteAlpha.100",p:"5",rounded:"xl",direction:"column",alignItems:"end",children:[window.localStorage.getItem("email")?Object(y.jsx)(J,{}):Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(b.a,{w:"full",children:[Object(y.jsx)(A.a,{required:!0,value:D,onChange:function(e){return F(e.target.value)},w:"full",_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",borderColor:"transparent",rounded:"lg",mb:"2",py:"5",placeholder:"Your name",_placeholder:{color:"whiteAlpha.400"}}),Object(y.jsx)(A.a,{w:"full",type:"email",value:X,onChange:function(e){return q(e.target.value)},id:"email",required:!0,_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",py:"5",borderColor:"transparent",rounded:"lg",placeholder:"Your email",_placeholder:{color:"whiteAlpha.400"}})]})}),Object(y.jsx)(m.a,{mt:"4",px:"6",type:(null===o||void 0===o?void 0:o.isOpen)?"submit":"button",w:"-webkit-fit-content",cursor:(null===o||void 0===o?void 0:o.isOpen)?"pointer":"not-allowed",_hover:{},_active:{},_focus:{},leftIcon:(null===o||void 0===o?void 0:o.isOpen)?C?Object(y.jsx)(I.a,{size:"sm"}):Object(y.jsx)(je.a,{size:"18px"}):Object(y.jsx)(Me.a,{size:"18px"}),bg:"brand.primary",fontSize:"sm",rounded:"lg",children:(null===o||void 0===o?void 0:o.isOpen)?Object(y.jsx)(y.Fragment,{children:"Register"}):Object(y.jsx)(y.Fragment,{children:"Registrations are closed"})})]})]})}),(null===o||void 0===o?void 0:o.description)||(null===o||void 0===o?void 0:o.content)?Object(y.jsxs)(b.a,{mt:"8",children:[Object(y.jsx)(j.a,{fontSize:"xl",mb:"4",fontWeight:"medium",children:"Event Details :"}),(null===o||void 0===o?void 0:o.description)?Object(y.jsx)(j.a,{fontSize:"lg",fontWeight:"semibold",children:null===o||void 0===o?void 0:o.description}):Object(y.jsx)(y.Fragment,{}),(null===o||void 0===o?void 0:o.content)?Object(y.jsx)(j.a,{id:"content",fontSize:"base",mt:"2",fontWeight:"thin",dangerouslySetInnerHTML:{__html:i.makeHtml(null===o||void 0===o?void 0:o.content)}}):Object(y.jsx)(y.Fragment,{})]}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsx)(b.a,{minW:{md:"240px",lg:"300px"},maxW:{md:"240px",lg:"350px"},ml:{md:"10"},children:Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(b.a,{mb:"2",children:[Object(y.jsx)(j.a,{fontSize:"xl",fontWeight:"medium",children:"Join Details :"}),Object(y.jsx)(u.a,{alignItems:"center",color:"brand.primary",cursor:"pointer",transitionDelay:"200ms",my:"4",children:"Virtual"===(null===o||void 0===o?void 0:o.platform)?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Re.a,{isExternal:!0,href:null===o||void 0===o?void 0:o.link,_focus:{},fontSize:"lg",mr:"1",isTruncated:!0,children:null===o||void 0===o?void 0:o.link}),Object(y.jsx)(b.a,{minW:"20px",onClick:function(){window.open(null===o||void 0===o?void 0:o.link,"_blank")},children:Object(y.jsx)(He.a,{})})]}):Object(y.jsxs)(u.a,{alignItems:"start",w:"-webkit-fit-content",children:[Object(y.jsx)(b.a,{minW:"20px",children:Object(y.jsx)(ke.a,{size:"18px"})}),Object(y.jsx)(j.a,{fontSize:"lg",ml:"2",mt:"-1",wordBreak:"break-all",children:null===o||void 0===o?void 0:o.link})]})})]}),Object(y.jsx)(z.a,{color:"white",opacity:"0.2"}),Object(y.jsx)(b.a,{mt:"6",children:null===o||void 0===o?void 0:o.createdBy.map((function(e,t){return Object(y.jsx)(Pe,{email:e},t)}))})]})})]})]})]})]})}):Object(y.jsx)(u.a,{minH:"100vh",color:"white",bg:"brand.secondary",justify:"center",alignItems:"center",children:"lol 404"})}):Object(y.jsx)(y.Fragment,{})})};var Ye=function(){var e=Object(r.useState)(void 0),t=Object(d.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(w.auth.session()),e.next=3,w.auth.onAuthStateChange((function(e,t){a(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(y.jsxs)(S.c,{children:[Object(y.jsx)(S.a,{exact:!0,path:"/",render:n?localStorage.getItem("email")?function(){return Object(y.jsx)(ce,{})}:function(){return Object(y.jsx)(F,{session:n})}:function(){return Object(y.jsx)(C,{})}}),Object(y.jsx)(S.a,{exact:!0,path:"/signin",component:D}),Object(y.jsx)(S.a,{exact:!0,path:"/event/:id",component:Ue}),Object(y.jsx)(S.a,{exact:!0,path:"/auth",render:function(){return Object(y.jsx)(F,{session:n})}}),localStorage.getItem("email")?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(S.a,{exact:!0,path:"/home",component:ce}),Object(y.jsx)(S.a,{exact:!0,path:"/new/community",component:pe}),Object(y.jsx)(S.a,{exact:!0,path:"/manage/community/:id",component:ve}),Object(y.jsx)(S.a,{exact:!0,path:"/manage/event/:id",component:qe}),Object(y.jsx)(S.a,{exact:!0,path:"/events",component:we}),Object(y.jsx)(S.a,{exact:!0,path:"/new/event",component:_e}),Object(y.jsx)(S.a,{exact:!0,path:"/manage/community/:id/new/event",component:_e}),Object(y.jsx)(S.a,{exact:!0,path:"/manage/community/:id/events",component:we}),Object(y.jsx)(S.a,{exact:!0,path:"/audience",component:Te}),Object(y.jsx)(S.a,{exact:!0,path:"/manage/community/:id/audience",component:Te})]}):Object(y.jsx)(D,{})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Qe=n(268),Ke=n(258),Ze=Object(Ke.a)({colors:{brand:{primary:"#FF4085",secondary:"#131517"},alpha:{white:"rgba(255, 255, 255, 0.1)"},pink:{600:"#DE316F",800:"#862F4E"},black:{400:"#212325"}},fonts:{brand:"Red Hat Display"}}),$e=n(142);c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(f.a,{children:Object(y.jsx)($e.a,{value:w,children:Object(y.jsx)(X,{children:Object(y.jsx)(Qe.a,{theme:Ze,children:Object(y.jsx)(Ye,{})})})})})}),document.getElementById("root")),Ve()}},[[195,1,2]]]);
//# sourceMappingURL=main.9fbdcec4.chunk.js.map