(this.webpackJsonprelm=this.webpackJsonprelm||[]).push([[0],{165:function(e,t,n){},167:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(59),c=n.n(o),i=(n(165),n(2)),s=n.n(i),l=n(9),d=n(3),u=(n(167),n(226)),b=n(224),j=n(228),m=n(275),h=n(234),p=n(235),x=n.p+"static/media/logo.e169293d.svg",f=n(227),O=n(32),g=n(225),v=n(229),w=n(149),y=Object(w.a)("https://thencvbhlwygpcdccbkq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzAwMjg5NiwiZXhwIjoxOTQ4NTc4ODk2fQ.3uEVHpW_zoY11trlhhuaO1ynC3Y4IBrpd4r7lc6Xnj8"),k=n(1);var S=function(e){var t=e.communityId,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),p=h[0],w=h[1];Object(r.useEffect)((function(){window.localStorage.getItem("email")&&S(),t&&C()}),[t]);var S=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("users").select("username, avatar_url, email").eq("email",window.localStorage.getItem("email")).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:c(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("communities").select("name, logo").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:w(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),_=function(){return Object(k.jsx)(O.b,{to:"/signin",children:Object(k.jsxs)(m.a,{bg:"alpha.white",color:"white",px:"6",size:"sm",fontSize:"xs",fontWeight:"bold",border:"1px",borderColor:"transparent",transitionDuration:"200ms",_hover:{bg:"rgba(255, 255, 255, 0.05)",borderColor:"whiteAlpha.200"},_focus:{},_active:{bg:"rgba(255, 255, 255, 0.12)"},children:["Sign in",Object(k.jsx)(b.a,{ml:"1",children:Object(k.jsx)(g.a,{size:"14px"})})]})})};return Object(k.jsxs)(u.a,{w:"full",justify:"space-between",alignItems:"center",children:[Object(k.jsxs)(u.a,{experimental_spaceX:p?"2":"3",onClick:function(){p||(window.location.href="/")},alignItems:"center",color:"white",_hover:{color:"brand.primary"},cursor:"pointer",transitionDuration:"300ms",children:[Object(k.jsx)(f.a,{rounded:p?"lg":"none",src:p?null===p||void 0===p?void 0:p.logo:x,alt:"relm",w:p?"7":"8",h:p?"7":"8"}),Object(k.jsx)(j.a,{fontWeight:"bold",fontSize:p?"base":"24",children:p?Object(k.jsx)(k.Fragment,{children:null===p||void 0===p?void 0:p.name}):Object(k.jsx)(k.Fragment,{children:"relm"})})]}),window.localStorage.getItem("email")?Object(k.jsx)(O.b,{to:"/home",children:Object(k.jsx)(m.a,{bg:"alpha.white",color:"white",px:"6",size:"sm",fontSize:"xs",fontWeight:"semibold",border:"1px",borderColor:"transparent",transitionDuration:"200ms",_hover:{bg:"rgba(255, 255, 255, 0.05)",borderColor:"whiteAlpha.200"},_focus:{},leftIcon:Object(k.jsx)(v.a,{size:"14px"}),_active:{bg:"rgba(255, 255, 255, 0.12)"},whiteSpace:"nowrap",children:Object(k.jsx)(j.a,{isTruncated:!0,overflow:"clip",maxW:"80px",children:null===o||void 0===o?void 0:o.username})})}):Object(k.jsx)(_,{})]})},C=n(273),_=n(231),A=n(223),I=n(151);var z=function(){var e=Object(C.a)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(!1),i=Object(d.a)(c,2),h=i[0],p=i[1],O=Object(r.useState)(""),g=Object(d.a)(O,2),v=g[0],w=g[1],y=function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v!==a)try{p(!0),n({EMAIL:a}),setTimeout((function(){e({title:"Success",position:"top-right",description:"Thank you for subscribing to Relm \ud83d\ude04",status:"success",duration:5e3,isClosable:!0}),w(a),o("")}),1500)}catch(r){console.log(r)}finally{setTimeout((function(){p(!1)}),1500)}else e({position:"top-right",description:"You are already subscribed",status:"info",duration:5e3,isClosable:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)(I.a,{url:"https://tech.us5.list-manage.com/subscribe/post?u=d4340c90dd362a5b80af646ba&amp;id=ead2619bac",render:function(e){var t=(e||{}).subscribe;return Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),y(t)},children:Object(k.jsx)(u.a,{justify:"center",children:Object(k.jsxs)(u.a,{w:"full",maxW:"1200px",justify:"space-between",bg:"brand.secondary",direction:{base:"column",md:"row"},alignItems:"center",color:"white",py:"8",px:{base:"8",lg:"24"},children:[Object(k.jsxs)(u.a,{cursor:"pointer",onClick:function(){return window.location.href="/"},alignItems:"center",experimental_spaceX:"4",children:[Object(k.jsx)(f.a,{src:x,alt:"relm",w:"12",h:"12"}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{fontWeight:"bold",fontSize:"2xl",children:"relm"}),Object(k.jsx)(j.a,{fontWeight:"thin",fontSize:"xx-small",children:"Activating your community"})]})]}),Object(k.jsxs)(u.a,{w:{base:"80%",md:"auto"},direction:"column",mt:{base:"8",md:"0"},children:[Object(k.jsxs)(j.a,{children:["Get updates about"," ",Object(k.jsx)(j.a,{display:"inline",color:"brand.primary",children:"Relm"})]}),Object(k.jsx)(_.a,{value:a,required:!0,onChange:function(e){return o(e.target.value)},type:"email",mt:"1.5",size:"sm",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Your email"}),Object(k.jsx)(m.a,{type:"submit",_hover:{},_active:{bg:"pink.600"},_focus:{},bg:"brand.primary",color:"white",size:"sm",px:"6",mt:"2",minW:"200px",fontSize:"xs",mb:{base:"4",md:"0"},children:h?Object(k.jsx)(A.a,{size:"sm"}):Object(k.jsx)(k.Fragment,{children:"Subscribe to our newsletter"})})]})]})})})}})};var W=function(){return Object(k.jsx)(u.a,{bg:"brand.secondary",justify:"center",children:Object(k.jsxs)(b.a,{maxW:"1400px",children:[Object(k.jsx)(u.a,{justify:"center",w:"full",children:Object(k.jsxs)(b.a,{minH:"100vh",py:"6",px:{base:"8",lg:"24"},w:"full",children:[Object(k.jsx)(S,{}),Object(k.jsxs)(u.a,{justify:"center",alignItems:"center",mt:"24",direction:"column",children:[Object(k.jsx)(j.a,{color:"brand.primary",fontWeight:"black",fontSize:{base:"4xl",md:"5xl",lg:"6xl"},align:"center",children:"Activating Your Community"}),Object(k.jsxs)(j.a,{color:"white",fontWeight:"medium",fontSize:{base:"xs",md:"sm",lg:"lg"},mt:"2",px:{lg:"40",md:"40",xl:"80"},align:"center",children:["Making communities more engaging with events, community analytics and newsletters with"," ",Object(k.jsx)(j.a,{cursor:"pointer",display:"inline",color:"brand.primary",children:"Relm"})]}),Object(k.jsx)(O.b,{to:"/signin",children:Object(k.jsxs)(m.a,{_hover:{transform:"translateY(-1.5px)"},_active:{bg:"pink.600"},_focus:{},bg:"brand.primary",color:"white",mt:"10",rounded:"2xl",fontWeight:"bold",fontSize:"lg",px:"14",py:"7",children:["Get Into Realm",Object(k.jsx)(h.a,{position:"absolute",top:"-2",right:"-3",color:"white",rounded:"full",bg:"pink.800",px:"3",py:"1",children:"beta"})]})})]})]})}),Object(k.jsx)(p.a,{opacity:"0.1"}),Object(k.jsx)(z,{})]})})},E=n(22),F=n(236),D=n.p+"static/media/google.d21a7387.png";var B=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(Object(k.jsx)(j.a,{children:"Continue"})),c=Object(d.a)(o,2),i=c[0],h=c[1],O=Object(r.useState)(""),g=Object(d.a)(O,2),v=g[0],w=g[1],S=Object(C.a)(),I=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.auth.signIn({provider:"google"});case 3:if(n=e.sent,!(r=n.error)){e.next=7;break}throw r;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 12:return e.prev=12,console.log("finally"),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,y.auth.signIn({email:t});case 4:if(n=e.sent,!(r=n.error)){e.next=8;break}throw r;case 8:S({title:"Account Created",position:"bottom",description:"Check your email for login link",status:"success",duration:5e3,isClosable:!0}),h(Object(k.jsx)(F.a,{})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 15:return e.prev=15,a(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(k.jsx)(b.a,{bg:"brand.secondary",pt:"10",pl:"10",display:{base:"block",md:"none"},children:Object(k.jsx)(f.a,{src:x,alt:"relm",w:"12",h:"12"})}),Object(k.jsxs)(u.a,{bg:"black.400",display:{base:"none",md:"flex"},w:{md:"35%"},h:"100vh",p:{base:"6",md:"10"},direction:"column",justify:"space-between",children:[Object(k.jsx)(f.a,{src:x,alt:"relm",w:"14",h:"14"}),Object(k.jsxs)(b.a,{color:"white",children:[Object(k.jsx)(j.a,{fontWeight:"bold",fontSize:"4xl",children:"relm"}),Object(k.jsx)(j.a,{fontWeight:"thin",fontSize:"sm",children:"Activating your community"})]})]}),Object(k.jsx)(b.a,{w:{base:"100%",md:"65%"},h:"100vh",bg:"brand.secondary",p:{base:"10",md:"20"},children:Object(k.jsxs)(b.a,{w:{base:"100%",lg:"400px"},children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"bold",fontSize:"3xl",children:"Sign In"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",mt:"8",fontSize:"sm",children:"Sign in with your email"}),Object(k.jsx)(_.a,{type:"email",onChange:function(e){w(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Your email"}),Object(k.jsx)(m.a,{w:"full",mt:"3",rounded:"lg",_focus:{},_active:{},onClick:function(){return z(v)},children:n?Object(k.jsx)(A.a,{}):i}),Object(k.jsxs)(u.a,{alignItems:"center",mt:"14",mb:"4",experimental_spaceX:"3",children:[Object(k.jsx)(j.a,{color:"white",fontSize:"xs",fontWeight:"medium",children:"OR"}),Object(k.jsx)(p.a,{w:"full",color:"white"})]}),Object(k.jsx)(m.a,{leftIcon:Object(k.jsx)(f.a,{src:D,w:"16px",h:"16px"}),border:"1px",borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200"},_focus:{},_active:{},w:"full",bg:"whiteAlpha.200",rounded:"lg",fontSize:"sm",color:"white",onClick:function(){return I()},children:"Sign In With Google"}),Object(k.jsx)(j.a,{color:"whiteAlpha.500",mt:"4",fontSize:"sm",children:"By signing in you agree to our terms and conditions"})]})})]})};var N=function(e){e.session;var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(null),i=Object(d.a)(c,2),h=i[0],p=i[1],O=Object(r.useState)(null),v=Object(d.a)(O,2),w=v[0],S=v[1],I=Object(r.useState)(!0),z=Object(d.a)(I,2),W=z[0],E=z[1],F=Object(C.a)();Object(r.useEffect)((function(){D()}),[]);var D=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E(!0),(t=y.auth.user())&&(p(t.email),t.username&&o(null===t||void 0===t?void 0:t.username),t.user_metadata&&S(null===(n=t.user_metadata)||void 0===n?void 0:n.avatar_url))}catch(r){console.log(r)}finally{E(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>3)){e.next=23;break}return e.prev=1,E(!0),n=y.auth.user(),r={id:n.id,username:t,avatar_url:w,email:h},e.next=7,y.from("users").upsert(r,{returning:"minimal"});case 7:if(a=e.sent,!(o=a.error)){e.next=11;break}throw o;case 11:window.localStorage.setItem("email",h),window.location.href="/home",e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),F({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 18:return e.prev=18,E(!1),e.finish(18);case 21:e.next=24;break;case 23:F({title:"Error",position:"bottom",description:"Your name should have than 3 characters",status:"error",duration:5e3,isClosable:!0});case 24:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(k.jsx)(b.a,{bg:"brand.secondary",pt:"10",pl:"10",display:{base:"block",md:"none"},children:Object(k.jsx)(f.a,{src:x,alt:"relm",w:"12",h:"12"})}),Object(k.jsxs)(u.a,{display:{base:"none",md:"flex"},w:{md:"35%"},h:"100vh",bg:"black.400",p:{base:"6",md:"10"},direction:"column",justify:"space-between",children:[Object(k.jsx)(f.a,{src:x,alt:"relm",w:"14",h:"14"}),Object(k.jsxs)(b.a,{color:"white",children:[Object(k.jsx)(j.a,{fontWeight:"bold",fontSize:"4xl",children:"relm"}),Object(k.jsx)(j.a,{fontWeight:"thin",fontSize:"sm",children:"Activating your community"})]})]}),Object(k.jsx)(b.a,{w:{base:"100%",md:"65%"},h:"100vh",bg:"brand.secondary",p:{base:"10",md:"20"},children:Object(k.jsxs)(b.a,{w:{base:"100%",lg:"400px"},children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"bold",fontSize:"3xl",children:"Let's know more about you"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",mt:"8",fontSize:"sm",children:"What do we call you?"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B(a)},children:[Object(k.jsx)(_.a,{value:a,type:"text",onChange:function(e){o(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Your name"}),Object(k.jsx)(m.a,{float:"right",mt:"6",rounded:"lg",_focus:{},_active:{},rightIcon:W?Object(k.jsx)(A.a,{size:"sm"}):Object(k.jsx)(g.a,{size:"20px"}),type:"submit",children:"Continue"})]})]})})]})},q=n(19),X=Object(r.createContext)({user:void 0,setUser:function(){}}),T=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1];return Object(k.jsx)(X.Provider,{value:{user:o,setUser:c},children:t})},R=function(){return Object(r.useContext)(X)},L=n(245),H=n(237),M=n(238),Y=n(239);var G=function(e){var t=e.id,n=e.name,r=(e.description,e.audience),a=e.events,o=e.logo;return Object(k.jsxs)(u.a,{onClick:function(){window.location.href="/manage/community/".concat(t)},border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},alignItems:"center",bg:"alpha.white",overflow:"clip",isTruncated:!0,p:"2",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:"320px",children:[Object(k.jsx)(H.a,{ratio:1,minW:"20",children:Object(k.jsx)(f.a,{src:o,rounded:"lg"})}),Object(k.jsxs)(u.a,{isTruncated:!0,direction:"column",justify:"space-between",children:[Object(k.jsx)(j.a,{isTruncated:!0,pr:"2",fontWeight:"bold",fontSize:{base:"lg",md:"lg"},children:n}),Object(k.jsxs)(u.a,{experimental_spaceX:"2",alignItems:"center",children:[Object(k.jsx)(M.a,{size:"16px"}),Object(k.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},children:r})]}),Object(k.jsxs)(u.a,{experimental_spaceX:"2",alignItems:"center",children:[Object(k.jsx)(Y.a,{size:"16px"}),Object(k.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},children:a})]})]})]})},J=n(240),P=n(241),U=n(242),V=n(243),K=n(278),Q=n(276),Z=n(274),$=n(247),ee={"Quick Event":{enabled:!0},Audience:{enabled:!0},Community:{enabled:!0},Insights:{enabled:!0},Newsletter:{enabled:!1},Explore:{enabled:!1},"Revenue Solution":{enabled:!1}};var te=function(e){var t=e.communityId,n=Object(r.useState)(window.location.pathname),a=Object(d.a)(n,2),o=a[0],c=a[1],i=R(),h=i.user,p=i.setUser,g=Object(r.useState)(void 0),v=Object(d.a)(g,2),w=v[0],S=v[1];Object(r.useEffect)((function(){h||p(JSON.parse(localStorage.getItem("user"))),t&&C(t)}),[t,p,h]);var C=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo ,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:S(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),_=[{name:"Home",isExternal:!1,link:t?"/manage/community/".concat(t):"/home",Icon:function(e){return Object(k.jsx)(J.a,Object(q.a)({},e))}},{name:"Audience",isExternal:!1,link:t?"/manage/community/".concat(t,"/audience"):"/audience",Icon:function(e){return Object(k.jsx)(M.a,Object(q.a)({},e))}},{name:"Events",isExternal:!1,link:t?"/manage/community/".concat(t,"/events"):"/events",Icon:function(e){return Object(k.jsx)(Y.a,Object(q.a)({},e))}},{name:"Insights",isExternal:!1,link:t?"/manage/community/".concat(t,"/insights"):"/insights",Icon:function(e){return Object(k.jsx)(P.a,Object(q.a)({},e))}},{name:"Newsletter",isExternal:!1,link:"#",Icon:function(e){return Object(k.jsx)(U.a,Object(q.a)({},e))}},{name:"Explore",isExternal:!1,link:"#",Icon:function(e){return Object(k.jsx)(V.a,Object(q.a)({},e))}}],A=function(e){var n=e.name,r=e.logo;return Object(k.jsxs)(u.a,{cursor:"pointer",onClick:function(){window.location.href="/manage/community/".concat(t)},mb:"6",display:"flex",alignItems:"center",experimental_spaceX:"2",children:[Object(k.jsx)(f.a,{src:r,alt:n,w:{base:"10",lg:"8"},h:{base:"10",lg:"8"},rounded:"full"}),Object(k.jsx)(j.a,{isTruncated:!0,color:"white",display:{base:"none",lg:"block"},fontWeight:"bold",fontSize:"xl",children:n})]})},I=function(e){var t,n=e.name,r=e.link,a=e.Icon,i=!ee[n]||!!(null===(t=ee[n])||void 0===t?void 0:t.enabled);return Object(k.jsx)(O.b,{to:i?r:"#",onClick:function(){return c(n)},children:Object(k.jsx)(K.a,{label:n,display:{lg:"none"},placement:"right",children:Object(k.jsxs)(u.a,{opacity:i?"1":"0.5",cursor:i?"pointer":"not-allowed",experimental_spaceX:"3",fontSize:"lg",color:o===r?"brand.primary":"white",alignItems:"center",children:[Object(k.jsx)(a,{fill:o===r?"#FF4085":"none"}),Object(k.jsx)(j.a,{display:{base:"none",lg:"block"},fontWeight:o===r?"bold":"normal",children:n})]})})})};return Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(u.a,{direction:"column",justify:"space-between",alignItems:{base:"center",lg:"start"},w:{base:"80px",md:"100px",lg:"360px"},bg:"black.400",h:"100vh",position:"fixed",p:{base:"6",lg:"10"},children:[Object(k.jsxs)(b.a,{w:{lg:"full"},children:[Object(k.jsx)(b.a,{w:"-webkit-fit-content",cursor:"pointer",onClick:function(){return window.location.href="/home"},children:Object(k.jsx)(f.a,{src:x,alt:"relm",w:"10",h:"10"})}),Object(k.jsxs)(b.a,{px:{base:"0",lg:"10"},mt:"50px",children:[t?w?Object(k.jsx)(A,{name:null===w||void 0===w?void 0:w.name,logo:null===w||void 0===w?void 0:w.logo}):Object(k.jsxs)(u.a,{mb:"6",display:"flex",alignItems:"center",experimental_spaceX:"2",children:[Object(k.jsx)(Q.a,{w:{base:"10",lg:"8"},h:{base:"10",lg:"8"},rounded:"full"}),Object(k.jsx)(Q.a,{rounded:"xl",h:"6",w:"20",display:{base:"none",lg:"block"}})]}):Object(k.jsx)(k.Fragment,{}),Object(k.jsxs)(m.a,{onClick:function(){var e=t?"/manage/community/".concat(t,"/new/event"):"/new/event";window.location.href=e},_hover:{bg:"#DD3370"},transitionDuration:"200ms",_focus:{},_active:{},size:"sm",py:"5",w:{base:"10",lg:"full"},rounded:{base:"full",lg:"xl"},color:"white",bg:"brand.primary",children:[Object(k.jsx)(j.a,{display:{base:"none",lg:"block"},children:"Create new event"}),Object(k.jsx)(b.a,{display:{base:"block",lg:"none"},children:Object(k.jsx)(L.a,{})})]}),Object(k.jsx)(u.a,{alignItems:{base:"center",lg:"start"},mt:"8",direction:"column",experimental_spaceY:"5",children:_.map((function(e,t){return Object(k.jsx)(I,Object(q.a)({},e),t)}))})]})]}),Object(k.jsx)(u.a,{p:{base:"0",md:"2"},w:{base:"-webkit-fit-content",lg:"full"},bg:"whiteAlpha.300",rounded:"full",alignItems:"center",children:Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Z.b,{overflow:"clip",children:Object(k.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(k.jsx)($.a,{size:"md",src:null===h||void 0===h?void 0:h.avatar_url,name:null===h||void 0===h?void 0:h.username}),Object(k.jsxs)(b.a,{display:{base:"none",lg:"block"},children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===h||void 0===h?void 0:h.username}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:null===h||void 0===h?void 0:h.email})]})]})}),Object(k.jsx)(Z.d,{bg:"brand.secondary",m:"2",borderColor:"gray.700",color:"white",children:Object(k.jsx)(Z.c,{_hover:{bg:"whiteAlpha.50"},_focus:{bg:"whiteAlpha.50"},onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.auth.signOut();case 2:window.location.href="/",p(void 0),localStorage.removeItem("user"),localStorage.removeItem("email");case 6:case"end":return e.stop()}}),e)}))),children:"Sign out"})})]})})]}),Object(k.jsx)(b.a,{w:{base:"0",md:"100px",lg:"360px"},bg:"pink",h:"full",minH:"100vh"})]})},ne=n(248),re=n(249);var ae=function(e){var t=e.children,n=e.communityId,a=Object(r.useState)(!1),o=Object(d.a)(a,2),c=o[0],i=o[1];return Object(k.jsxs)(u.a,{children:[Object(k.jsx)(b.a,{zIndex:2,display:{base:c?"block":"none",md:"block"},children:Object(k.jsx)(te,{communityId:n})}),Object(k.jsxs)(b.a,{p:{base:"8",md:"10"},bg:"brand.secondary",w:"full",minH:"100vh",color:"white",children:[Object(k.jsxs)(u.a,{display:{base:"flex",md:"none"},m:"-4",justify:"space-between",mb:"4",alignItems:"center",children:[Object(k.jsx)(f.a,{src:x,alt:"relm",w:"10",h:"10",ml:"1",mt:"2"}),Object(k.jsx)(b.a,{cursor:"pointer",onClick:function(){return i(!c)},rounded:"full",p:"2",_hover:{bg:"whiteAlpha.200"},children:c?Object(k.jsx)(ne.a,{}):Object(k.jsx)(re.a,{})})]}),t]})]})};function oe(e){if(e)return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.month-1]," ").concat(e.date,", ").concat(e.time," GMT+5:30")}var ce=function(e){var t=e.id,n=e.name,a=e.description,o=e.date,c=e.image,i=e.community,h=e.audience,p=Object(r.useState)(void 0),x=Object(d.a)(p,2),O=x[0],g=x[1];Object(r.useEffect)((function(){i&&v()}),[]);var v=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("communities").select("id, name, logo").eq("id",i).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:g(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{direction:"column",border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"300px"},onClick:function(){window.location.href="/manage/event/".concat(t)},children:[Object(k.jsx)(H.a,{ratio:1920/1080,w:"full",children:Object(k.jsx)(f.a,{src:c,alt:n,rounded:"lg"})}),Object(k.jsxs)(u.a,{direction:"column",justify:"space-between",h:"full",children:[Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{fontSize:"xl",fontWeight:"bold",mt:"4",children:n}),Object(k.jsxs)(u.a,{fontSize:"xs",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(k.jsx)(Y.a,{size:"14px"}),Object(k.jsx)(j.a,{children:oe(o)})]}),Object(k.jsxs)(u.a,{mt:"1",fontSize:"xs",experimental_spaceX:"1.5",color:"white",alignItems:"center",children:[Object(k.jsx)(M.a,{size:"14px"}),Object(k.jsx)(j.a,{children:h})]}),Object(k.jsx)(j.a,{mt:"4",children:a})]}),Object(k.jsx)(b.a,{children:Object(k.jsxs)(u.a,{mt:"4",mb:"2",justify:"space-between",mr:"2",children:[O?Object(k.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(k.jsx)(f.a,{src:O.logo,alt:O.name,w:"5",h:"5",rounded:"base"}),Object(k.jsx)(j.a,{fontWeight:"medium",fontSize:"sm",children:O.name})]}):Object(k.jsx)(b.a,{}),Object(k.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Manage"})]})})]})]})},ie=function(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear();return console.log(n,a,r),e.date>=n&&e.month>=r&&e.year>=a};function se(){for(var e=[[0,4,"Good Night"],[5,11,"Good Morning"],[12,17,"Good Afternoon"],[18,24,"Good Night"]],t=(new Date).getHours(),n=0;n<e.length;n++)if(t>=e[n][0]&&t<=e[n][1])return e[n][2]}var le=n(34);var de=function(){var e=R(),t=e.user,n=e.setUser,a=Object(r.useState)(void 0),o=Object(d.a)(a,2),c=o[0],i=o[1],h=Object(r.useState)(void 0),x=Object(d.a)(h,2),f=x[0],g=x[1];Object(r.useEffect)((function(){C(),S(),v()}),[]);var v=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:a=[],o=[],n.forEach((function(e){ie(e.date)?a.push(e):o.push(e)})),g(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.a,{justify:"space-between",mt:"6",alignItems:"center",children:[Object(k.jsx)(O.b,{to:"/events",children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"UPCOMING EVENTS"})}),Object(k.jsx)(O.b,{to:"/new/event",children:Object(k.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(k.jsx)(L.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),Object(k.jsx)(u.a,{wrap:"wrap",mt:"4",children:f?null===f||void 0===f?void 0:f.map((function(e,t){return Object(k.jsx)(ce,Object(q.a)({},e),t)})):Object(k.jsx)(k.Fragment,{})})]})},S=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 4:if(t=e.sent,n=t.data,!(r=t.error)){e.next=9;break}throw r;case 9:i(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("users").select("username, avatar_url, email").eq("email",localStorage.getItem("email")).single();case 4:if(t=e.sent,r=t.data,!(a=t.error)){e.next=9;break}throw a;case 9:n(r),localStorage.setItem("user",JSON.stringify({username:r.username,avatar_url:r.avatar_url,email:r.email})),console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"Home | Relm"})}),Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(j.a,{color:"whiteAlpha.500",fontSize:{base:"sm",md:"lg"},children:[se(),","]}),Object(k.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===t||void 0===t?void 0:t.username}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"}),Object(k.jsxs)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:[Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"COMMUNITIES"}),Object(k.jsx)(O.b,{to:"/new/community",children:Object(k.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(k.jsx)(L.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),(null===c||void 0===c?void 0:c.length)>0?Object(k.jsx)(u.a,{mt:"4",wrap:"wrap",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(k.jsx)(G,Object(q.a)({},e),t)}))}):c?Object(k.jsx)(u.a,{color:"whiteAlpha.600",my:"8",textAlign:"center",justify:"center",children:"\ud83d\udc1d Click on create to add communities"}):Object(k.jsx)(k.Fragment,{}),(null===f||void 0===f?void 0:f.length)>0?Object(k.jsx)(w,{}):Object(k.jsx)(k.Fragment,{})]})]})},ue=n(244),be=n(271),je=n(253),me=n(250),he=n(251),pe=n(252),xe=n(254),fe=n(67),Oe=n.n(fe);var ge=function(){var e=["https://ik.imagekit.io/86h5mrsjotwk/defaultCommunityLogo_gUich_dto.svg?updatedAt=1633160835413","https://ik.imagekit.io/86h5mrsjotwk/dc-3_PXKqFbob4Lj.svg?updatedAt=1633165287477","https://ik.imagekit.io/86h5mrsjotwk/dc-2_7d7-btPTg.svg?updatedAt=1633165286592","https://ik.imagekit.io/86h5mrsjotwk/dc-1_JT81iTWJQGq.svg?updatedAt=1633165286130"],t=R().user,n=Object(r.useState)(e[0]),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(""),h=Object(d.a)(i,2),x=h[0],O=h[1],g=Object(r.useState)(""),v=Object(d.a)(g,2),w=v[0],S=v[1],I=Object(r.useState)(!1),z=Object(d.a)(I,2),W=z[0],E=z[1],F=Object(r.useState)(!1),D=Object(d.a)(F,2),B=D[0],N=D[1],q=Object(C.a)(),X=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,N(!0),e.next=7,Oe.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),c(r.data.url),M(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),T=Object(ue.a)(),L=T.isOpen,H=T.onOpen,M=T.onClose,Y=function(){var e=Object(l.a)(s.a.mark((function e(n,r,a){var o,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>3)){e.next=24;break}return c(a),e.prev=2,E(!0),o={name:n,description:r,logo:a,createdBy:[null===t||void 0===t?void 0:t.email]},e.next=7,y.from("communities").upsert(o).single();case 7:if(i=e.sent,l=i.data,!(d=i.error)){e.next=12;break}throw d;case 12:q({title:"Success",position:"bottom",description:"Community created successfully!",status:"success",duration:5e3,isClosable:!0}),setTimeout((function(){window.location.href="/manage/community/".concat(l.id)}),1e3),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),q({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,E(!1),e.finish(19);case 22:e.next=25;break;case 24:q({title:"Error",position:"bottom",description:"Name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"New Community | Relm"})}),Object(k.jsxs)(be.a,{isOpen:L,onClose:M,children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(k.jsx)(be.f,{children:"Choose a logo"}),Object(k.jsx)(be.c,{}),Object(k.jsx)(be.b,{children:Object(k.jsxs)(u.a,{wrap:"wrap",children:[Object(k.jsx)(u.a,{cursor:"pointer",border:"2px",justify:"center",alignItems:"center",_hover:{borderColor:"whiteAlpha.50"},borderColor:"transparent",mb:"3",mr:"3",w:"24",h:"24",rounded:"xl",bg:"whiteAlpha.300",onClick:function(){document.getElementById("file").click()},children:Object(k.jsx)(me.a,{size:"30px"})}),e.map((function(e,t){return Object(k.jsx)(b.a,{cursor:"pointer",onClick:function(){c(e)},children:Object(k.jsx)(f.a,{border:"4px",borderColor:o===e?"brand.primary":"transparent",mb:"3",mr:"3",src:e,w:"24",h:"24",rounded:"xl"})},t)}))]})}),Object(k.jsx)(_.a,{type:"file",id:"file",accept:"image/*",display:"none",onChange:function(e){return X(e.target.files[0])}}),Object(k.jsx)(be.e,{children:Object(k.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:M,children:B?Object(k.jsx)(A.a,{}):Object(k.jsx)(k.Fragment,{children:"Done"})})})]})]}),Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"4",children:[Object(k.jsx)(b.a,{cursor:"pointer",p:"2",onClick:function(){window.location.href="/home"},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(k.jsx)(he.a,{})}),Object(k.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Create Community"})]}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"}),Object(k.jsxs)(u.a,{mt:"6",w:{base:"full",md:"80%"},direction:{base:"column",md:"row"},children:[Object(k.jsxs)(b.a,{minW:"24",mr:"6",mb:"4",children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mb:"1",children:"Logo"}),Object(k.jsxs)(b.a,{position:"relative",w:"-webkit-fit-content",children:[Object(k.jsx)(b.a,{position:"absolute",bg:"blackAlpha.500",p:"2",cursor:"pointer",_hover:{bg:"blackAlpha.600"},transitionDuration:"200ms",roundedTopStart:"xl",bottom:"0",right:"0",onClick:H,children:Object(k.jsx)(pe.a,{size:"18px"})}),Object(k.jsx)(f.a,{src:o,w:"24",h:"24",rounded:"lg"})]})]}),Object(k.jsxs)(b.a,{w:"full",children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Name *"}),Object(k.jsx)(_.a,{w:{base:"full",md:"80%",lg:"70%"},type:"text",mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Community name",onChange:function(e){return O(e.target.value)}}),Object(k.jsx)(j.a,{color:"white",mt:"4",fontWeight:"medium",fontSize:"sm",children:"Description"}),Object(k.jsx)(je.a,{w:{base:"full",md:"80%",lg:"70%"},type:"email",mt:"1.5",p:"4",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe your community",onChange:function(e){return S(e.target.value)}}),Object(k.jsx)(u.a,{mt:"6",justify:"end",w:{base:"full",md:"80%",lg:"70%"},children:Object(k.jsx)(m.a,{display:"flex",float:"right",rounded:"lg",w:W?"200px":"auto",_focus:{},_active:{},color:"black",onClick:function(){return Y(x,w,o)},children:W?Object(k.jsx)(A.a,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(xe.a,{})," ",Object(k.jsx)(j.a,{ml:"2",children:"Create Community"})]})})})]})]})]})]})},ve=n(256);var we=function(e){var t=e.id,n=e.communityName,a=e.communityDescription,o=e.communityLogo,c=e.close,i=["https://ik.imagekit.io/86h5mrsjotwk/defaultCommunityLogo_gUich_dto.svg?updatedAt=1633160835413","https://ik.imagekit.io/86h5mrsjotwk/dc-3_PXKqFbob4Lj.svg?updatedAt=1633165287477","https://ik.imagekit.io/86h5mrsjotwk/dc-2_7d7-btPTg.svg?updatedAt=1633165286592","https://ik.imagekit.io/86h5mrsjotwk/dc-1_JT81iTWJQGq.svg?updatedAt=1633165286130"],h=R().user,p=Object(r.useState)(o),x=Object(d.a)(p,2),O=x[0],g=x[1],v=Object(r.useState)(n),w=Object(d.a)(v,2),S=w[0],I=w[1],z=Object(r.useState)(a),W=Object(d.a)(z,2),E=W[0],F=W[1],D=Object(r.useState)(!1),B=Object(d.a)(D,2),N=B[0],q=B[1],X=Object(r.useState)(!1),T=Object(d.a)(X,2),L=T[0],H=T[1],M=Object(C.a)(),Y=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,H(!0),e.next=7,Oe.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),g(r.data.url),U(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,H(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),G=Object(ue.a)(),J=G.isOpen,P=G.onOpen,U=G.onClose,V=function(){return Object(k.jsxs)(be.a,{isOpen:J,onClose:U,children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(k.jsx)(be.f,{children:"Choose a logo"}),Object(k.jsx)(be.c,{}),Object(k.jsx)(be.b,{children:Object(k.jsxs)(u.a,{wrap:"wrap",children:[Object(k.jsx)(u.a,{cursor:"pointer",border:"2px",justify:"center",alignItems:"center",_hover:{borderColor:"whiteAlpha.50"},borderColor:"transparent",mb:"3",mr:"3",w:"24",h:"24",rounded:"xl",bg:"whiteAlpha.300",onClick:function(){document.getElementById("file").click()},children:Object(k.jsx)(me.a,{size:"30px"})}),i.map((function(e,t){return Object(k.jsx)(b.a,{cursor:"pointer",onClick:function(){g(e)},children:Object(k.jsx)(f.a,{border:"4px",borderColor:O===e?"brand.primary":"transparent",mb:"3",mr:"3",src:e,w:"24",h:"24",rounded:"xl"})},t)}))]})}),Object(k.jsx)(_.a,{type:"file",id:"file",accept:"image/*",display:"none",onChange:function(e){return Y(e.target.files[0])}}),Object(k.jsx)(be.e,{children:Object(k.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:U,children:L?Object(k.jsx)(A.a,{}):Object(k.jsx)(k.Fragment,{children:"Done"})})})]})]})},K=function(){var e=Object(l.a)(s.a.mark((function e(n,r,a){var o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>3)){e.next=24;break}return g(a),e.prev=2,q(!0),o={id:t,name:n,description:r,logo:a,createdBy:[null===h||void 0===h?void 0:h.email]},e.next=7,y.from("communities").upsert(o,{returning:"minimal"});case 7:if(i=e.sent,!(l=i.error)){e.next=11;break}throw l;case 11:M({title:"Success",position:"bottom",description:"Community created successfully!",status:"success",duration:5e3,isClosable:!0}),c(),window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),M({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,q(!1),e.finish(19);case 22:e.next=25;break;case 24:M({title:"Error",position:"bottom",description:"Name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{mt:"6",w:"full",direction:{base:"column",md:"row"},color:"white",children:[Object(k.jsx)(V,{}),Object(k.jsxs)(b.a,{minW:"24",mr:"6",mb:"4",children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mb:"1",children:"Logo"}),Object(k.jsxs)(b.a,{position:"relative",w:"-webkit-fit-content",children:[Object(k.jsx)(b.a,{position:"absolute",bg:"blackAlpha.500",p:"2",cursor:"pointer",_hover:{bg:"blackAlpha.600"},transitionDuration:"200ms",roundedTopStart:"xl",bottom:"0",right:"0",onClick:P,children:Object(k.jsx)(pe.a,{size:"18px"})}),Object(k.jsx)(f.a,{src:O,w:"24",h:"24",rounded:"lg"})]})]}),Object(k.jsxs)(b.a,{w:"full",children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Name *"}),Object(k.jsx)(_.a,{value:S,w:"full",type:"text",mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Community name",onChange:function(e){return I(e.target.value)}}),Object(k.jsx)(j.a,{color:"white",mt:"4",fontWeight:"medium",fontSize:"sm",children:"Description"}),Object(k.jsx)(je.a,{value:E,w:"full",type:"email",mt:"1.5",p:"4",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe your community",onChange:function(e){return F(e.target.value)}}),Object(k.jsx)(u.a,{mt:"6",justify:"end",w:"full",children:Object(k.jsx)(m.a,{display:"flex",float:"right",rounded:"lg",w:N?"100px":"auto",_focus:{},_active:{},color:"black",onClick:function(){return K(S,E,O)},children:N?Object(k.jsx)(A.a,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(xe.a,{})," ",Object(k.jsx)(j.a,{ml:"2",children:"Save"})]})})})]})]})},ye=n(255);var ke=function(e){var t=e.username,n=e.communityName,r=e.link,a=Object(E.f)();return Object(k.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"2",children:[Object(k.jsx)(b.a,{cursor:"pointer",onClick:function(){r?window.location.href=r:a.goBack()},children:Object(k.jsx)(he.a,{size:"18px"})}),Object(k.jsxs)(ye.a,{color:"white",children:[Object(k.jsx)(ye.b,{children:Object(k.jsx)(ye.c,{href:"/home",children:t})}),Object(k.jsx)(ye.b,{children:Object(k.jsx)(ye.c,{href:"#",children:n})})]})]})};var Se=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),x=h[0],f=h[1],g=R().user,v=Object(ue.a)(),w=v.isOpen,S=v.onOpen,C=v.onClose;Object(r.useEffect)((function(){I(),_()}),[]);var _=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).eq("community",t).order("created_at",{ascending:!1});case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:o=[],c=[],r.forEach((function(e){ie(e.date)?o.push(e):c.push(e)})),f(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:[Object(k.jsx)(O.b,{to:"/manage/community/".concat(t,"/events"),children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"UPCOMING EVENTS"})}),Object(k.jsx)(O.b,{to:"/manage/community/".concat(t,"/new/event"),children:Object(k.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(k.jsx)(L.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},children:"Create"})})]}),(null===x||void 0===x?void 0:x.length)>0?null===x||void 0===x?void 0:x.map((function(e,t){return Object(k.jsx)(u.a,{wrap:"wrap",mt:"4",children:Object(k.jsx)(ce,Object(q.a)({},e),t)})})):x?Object(k.jsx)(u.a,{color:"whiteAlpha.600",my:"10",justify:"center",textAlign:"center",children:"\ud83d\udc1d No upcoming events"}):Object(k.jsx)(k.Fragment,{})]})},I=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:c(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{communityId:t,children:[o?Object(k.jsx)(le.a,{children:Object(k.jsxs)("title",{children:[null===o||void 0===o?void 0:o.name," | Relm"]})}):Object(k.jsx)(k.Fragment,{}),Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(be.a,{isOpen:w,onClose:C,size:"xl",children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{bg:"#1D2023",children:[Object(k.jsxs)(be.f,{color:"white",children:["Settings ",Object(k.jsx)(be.c,{color:"white"})]}),Object(k.jsx)(be.b,{px:"8",pb:"8",children:Object(k.jsx)(we,{communityName:null===o||void 0===o?void 0:o.name,communityDescription:null===o||void 0===o?void 0:o.description,communityLogo:null===o||void 0===o?void 0:o.logo,id:null===o||void 0===o?void 0:o.id,close:C})})]})]}),Object(k.jsx)(ke,{link:"/home",username:null===g||void 0===g?void 0:g.username,communityName:null===o||void 0===o?void 0:o.name}),Object(k.jsxs)(u.a,{justify:"space-between",alignItems:"end",children:[Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===o||void 0===o?void 0:o.name}),(null===o||void 0===o?void 0:o.description)?Object(k.jsx)(j.a,{fontSize:{base:"xs",md:"sm"},fontWeight:"thin",children:null===o||void 0===o?void 0:o.description}):Object(k.jsx)(k.Fragment,{})]}),Object(k.jsx)(b.a,{_hover:{bg:"whiteAlpha.200"},rounded:"full",p:"2",cursor:"pointer",onClick:function(){return S()},children:Object(k.jsx)(ve.a,{size:"20px"})})]}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"})]}),x?Object(k.jsx)(A,{}):Object(k.jsx)(k.Fragment,{})]})};var Ce=function(e){var t=e.match.params.id,n=Object(r.useState)("Upcoming"),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),x=h[0],f=h[1],O=Object(r.useState)(void 0),g=Object(d.a)(O,2),v=g[0],w=g[1],S=Object(r.useState)(void 0),C=Object(d.a)(S,2),_=C[0],A=C[1],I=R().user;Object(r.useEffect)((function(){t&&E(),z()}),[]);var z=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,i,l,d,u,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=16;break}return e.next=4,y.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).eq("community",t).order("created_at",{ascending:!1});case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:o=[],c=[],r.forEach((function(e){ie(e.date)?o.push(e):c.push(e)})),w(c),f(o),e.next=28;break;case 16:return e.next=18,y.from("events").select("id, name, image, description, date, community, audience").contains("createdBy",[localStorage.getItem("email")]).order("created_at",{ascending:!1});case 18:if(i=e.sent,l=i.data,!(d=i.error)){e.next=23;break}throw d;case 23:u=[],b=[],l.forEach((function(e){ie(e.date)?u.push(e):b.push(e)})),w(b),f(u);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}(),W=function(e){var t=e.name;return Object(k.jsx)(b.a,{py:"2",px:"4",borderBottom:"2px",onClick:function(){return c(t)},transitionDuration:"200ms",cursor:"pointer",color:o===t?"brand.primary":"whiteAlpha.700",_hover:{color:o===t?"brand.primary":"white"},borderColor:o===t?"brand.primary":"transparent",children:Object(k.jsx)(j.a,{children:t})})},E=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:A(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{communityId:t,children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"Events | Relm"})}),Object(k.jsxs)(b.a,{children:[t?Object(k.jsx)(ke,{username:null===I||void 0===I?void 0:I.username,communityName:null===_||void 0===_?void 0:_.name}):Object(k.jsx)(k.Fragment,{}),Object(k.jsxs)(u.a,{alignItems:"center",justify:"space-between",children:[Object(k.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Events"}),Object(k.jsx)(m.a,{size:"sm",bg:"alpha.white",border:"1px",borderColor:"transparent",leftIcon:Object(k.jsx)(L.a,{size:"18px"}),px:"4",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},_focus:{},_active:{bg:"whiteAlpha.200"},onClick:function(){var e=t?"/manage/community/".concat(t,"/new/event"):"/new/event";window.location.href=e},children:"Create"})]}),Object(k.jsx)(u.a,{mt:"3",experimental_spaceX:"3",children:["Upcoming","Done"].map((function(e,t){return Object(k.jsx)(W,{name:e})}))}),Object(k.jsx)(p.a,{color:"white",opacity:"0.2"}),Object(k.jsxs)(u.a,{wrap:"wrap",mt:"6",children:["Upcoming"===o&&x?(null===x||void 0===x?void 0:x.length)>0?null===x||void 0===x?void 0:x.map((function(e,t){return Object(k.jsx)(ce,Object(q.a)({},e),t)})):Object(k.jsx)(u.a,{w:"full",color:"whiteAlpha.600",my:"10",justify:"center",textAlign:"center",children:"\ud83d\udc1d No upcoming events"}):Object(k.jsx)(k.Fragment,{}),"Done"===o&&v?(null===v||void 0===v?void 0:v.length)>0?null===v||void 0===v?void 0:v.map((function(e,t){return Object(k.jsx)(ce,Object(q.a)({},e),t)})):Object(k.jsx)(u.a,{w:"full",color:"whiteAlpha.600",my:"10",justify:"center",textAlign:"center",children:"\ud83d\udc1d No past events"}):Object(k.jsx)(k.Fragment,{})]})]})]})},_e=n(258),Ae=n(257),Ie=n(82),ze=n.n(Ie);var We=function(e){var t=e.match.params.id,n=[{name:"\ud83d\udcbb Virtual",enum:"Virtual",placeholder:"Link to event"},{name:"\ud83c\udf0d In Person",enum:"InPerson",placeholder:"Location to event"}],a=R().user,o=Object(r.useState)(n[0]),c=Object(d.a)(o,2),i=c[0],h=c[1],x=Object(r.useState)(""),O=Object(d.a)(x,2),g=O[0],v=O[1],w=Object(r.useState)("https://i.ibb.co/L61C1RD/default-Event.png"),S=Object(d.a)(w,2),I=S[0],z=S[1],W=Object(r.useState)(""),F=Object(d.a)(W,2),D=F[0],B=F[1],N=Object(r.useState)({}),X=Object(d.a)(N,2),T=X[0],L=X[1],M=Object(r.useState)(""),G=Object(d.a)(M,2),J=G[0],P=G[1],U=Object(r.useState)(""),V=Object(d.a)(U,2),K=V[0],Q=V[1],Z=Object(r.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)(void 0),re=Object(d.a)(ne,2),oe=re[0],ce=re[1],ie=Object(r.useState)("None"),se=Object(d.a)(ie,2),de=se[0],ue=se[1],be=Object(r.useState)(void 0),me=Object(d.a)(be,2),pe=me[0],fe=me[1],ge=Object(r.useState)(!1),ve=Object(d.a)(ge,2),we=ve[0],ye=ve[1],Se=Object(C.a)(),Ce=Object(E.f)();Object(r.useEffect)((function(){t&&Ee(),We()}),[]);var Ie=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,ye(!0),e.next=7,Oe.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),z(r.data.url),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.prev=15,ye(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("communities").select("id, name").contains("createdBy",[localStorage.getItem("email")]);case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:fe(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:ce(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D.length>3)){e.next=41;break}if(z(I),e.prev=2,te(!0),n={},!t){e.next=15;break}return n={name:D,description:J,content:K,date:T,link:g,image:I,admin:localStorage.getItem("email"),platform:i.enum,createdBy:[localStorage.getItem("email")],community:t},e.next=9,y.from("communities").select("id, events").eq("id",t).single();case 9:return r=e.sent,a=r.data,e.next=13,y.from("communities").upsert({id:a.id,events:a.events+1},{returning:"minimal"}).single();case 13:e.next=16;break;case 15:n={name:D,description:J,content:K,date:T,link:g,image:I,admin:localStorage.getItem("email"),platform:i.enum,createdBy:[localStorage.getItem("email")],community:"None"===de?null:de};case 16:return e.next=18,y.from("events").upsert(n).single();case 18:if(o=e.sent,"None"===de){e.next=26;break}return e.next=22,y.from("communities").select("id, events").eq("id",de).single();case 22:return c=e.sent,l=c.data,e.next=26,y.from("communities").upsert({id:l.id,events:l.events+1},{returning:"minimal"});case 26:if(!o.error){e.next=28;break}throw o.error;case 28:Se({title:"Success",position:"bottom",description:"Event created successfully!",status:"success",duration:5e3,isClosable:!0}),setTimeout((function(){window.location.href="/manage/event/".concat(o.data.id)}),1e3),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.log(e.t0),Se({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 36:return e.prev=36,te(!1),e.finish(36);case 39:e.next=42;break;case 41:Se({title:"Error",position:"bottom",description:"Event name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 42:case"end":return e.stop()}}),e,null,[[2,32,36,39]])})));return function(){return e.apply(this,arguments)}}(),De=function(){return Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",mb:"4",children:[Object(k.jsx)(Ae.a,{})," ",Object(k.jsx)(j.a,{children:"Where will it happen? *"})]}),Object(k.jsx)(u.a,{p:"1.5",bg:"whiteAlpha.200",w:"-webkit-fit-content",experimental_spaceX:"3",rounded:"lg",children:n.map((function(e,t){return Object(k.jsx)(b.a,{onClick:function(){h(e),v("")},cursor:"pointer",color:e.name===i.name?"white":"whiteAlpha.800",_hover:{color:"white"},transitionDuration:"200ms",bg:e.name===i.name?"whiteAlpha.300":"transparent",px:"4",py:"1",rounded:"base",children:e.name},t)}))})]})};return Object(k.jsxs)(ae,{communityId:t,children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"New Event | Relm"})}),Object(k.jsxs)(b.a,{children:[t?Object(k.jsx)(ke,{username:null===a||void 0===a?void 0:a.username,communityName:null===oe||void 0===oe?void 0:oe.name}):Object(k.jsx)(k.Fragment,{}),Object(k.jsxs)(u.a,{alignItems:"center",experimental_spaceX:"4",children:[t?Object(k.jsx)(k.Fragment,{}):Object(k.jsx)(b.a,{cursor:"pointer",p:"2",onClick:function(){Ce.goBack()},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(k.jsx)(he.a,{})}),Object(k.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Create Event"})]}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"})]}),Object(k.jsxs)(u.a,{alignItems:"center",mt:"6",direction:"column",children:[Object(k.jsx)(H.a,{ratio:1920/1080,w:{base:"full",md:"80%",lg:"70%"},shadow:"xl",children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(f.a,{rounded:"lg",src:I}),Object(k.jsx)(m.a,{position:"absolute",bottom:"0",left:"0",m:"4",size:"sm",bg:"blackAlpha.600",border:"1px",onClick:function(){return document.getElementById("file").click()},borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200",bg:"blackAlpha.800"},_focus:{},_active:{bg:"blackAlpha.700"},children:we?Object(k.jsx)(A.a,{}):Object(k.jsx)(k.Fragment,{children:"Change cover photo"})})]})}),Object(k.jsx)(_.a,{type:"file",accept:"image/*",id:"file",display:"none",onChange:function(e){return Ie(e.target.files[0])}}),Object(k.jsx)(b.a,{w:{base:"full",md:"80%",lg:"70%"},mt:"4",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Fe()},children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Event Name *"}),Object(k.jsx)(_.a,{w:"full",onChange:function(e){return B(e.target.value)},type:"text",mt:"1.5",py:"5",isRequired:!0,px:"0",rounded:"none",color:"white",fontSize:"xl",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"1px",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Designing Session"}),Object(k.jsx)(De,{}),Object(k.jsx)(_.a,{w:"full",type:"text",mt:"3",py:"5",rounded:"lg",color:"white",isRequired:!0,value:g,onChange:function(e){return v(e.target.value)},_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:i.placeholder}),Object(k.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",children:[Object(k.jsx)(Y.a,{})," ",Object(k.jsx)(j.a,{children:"When will it happen? *"})]}),Object(k.jsxs)(u.a,{experimental_spaceX:"4",mt:"2",children:[Object(k.jsx)(_.a,{w:"full",type:"date",placeholder:"Date",onChange:function(e){var t=e.target.value;console.log(t);var n=t.split("-");L(Object(q.a)(Object(q.a)({},T),{},{date:n[2],month:n[1],year:n[0]}))},mt:"1.5",py:"5",rounded:"lg",isRequired:!0,color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}}),Object(k.jsx)(_.a,{w:{sm:"70%",lg:"40%"},type:"time",placeholder:"Time",onChange:function(e){L(Object(q.a)(Object(q.a)({},T),{},{time:ze()(e.target.value,"HH:mm").format("hh:mm A")}))},mt:"1.5",isRequired:!0,py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}})]}),Object(k.jsx)(j.a,{mt:"1",color:"whiteAlpha.500",children:"* Date and time is in GMT+5:30"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"6",children:"Description"}),Object(k.jsx)(_.a,{w:"full",type:"text",onChange:function(e){return P(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe about your event in brief"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Content"}),Object(k.jsx)(je.a,{w:"full",onChange:function(e){return Q(e.target.value)},type:"text",mt:"1.5",py:"3",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Write about your event"}),oe?Object(k.jsx)(k.Fragment,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Community"}),Object(k.jsxs)(_e.a,{color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},mt:"2",onChange:function(e){return ue(e.target.value)},children:[Object(k.jsx)("option",{style:{color:"white",backgroundColor:"black"},value:null,children:"None"}),null===pe||void 0===pe?void 0:pe.map((function(e,t){return Object(k.jsx)("option",{style:{color:"white",backgroundColor:"black"},value:e.id,children:e.name},t)}))]})]}),Object(k.jsx)(m.a,{color:"black",float:"right",mt:"6",type:"submit",rounded:"lg",_focus:{},_active:{},leftIcon:ee?Object(k.jsx)(A.a,{}):Object(k.jsx)(xe.a,{size:"20px"}),children:ee?Object(k.jsx)(k.Fragment,{}):Object(k.jsx)(k.Fragment,{children:"Create Event"})})]})})]})]})},Ee=n(17),Fe=n(260),De=n(261),Be=n(262),Ne=n(277),qe=n(263),Xe=n(259);var Te=function(e){var t=e.audience,n=(e.communityId,e.placeholder);return Object(k.jsx)(b.a,{border:"1px",rounded:"xl",mt:"4",borderColor:"whiteAlpha.400",children:Object(k.jsxs)(Xe.a,{variant:"simple",colorScheme:"whiteAlpha",children:[Object(k.jsx)(Xe.e,{children:Object(k.jsxs)(Xe.f,{children:[Object(k.jsx)(Xe.d,{color:"whiteAlpha.600",children:"Name"}),Object(k.jsx)(Xe.d,{color:"whiteAlpha.600",display:{base:"none",md:"table-cell"},children:"Email"}),Object(k.jsx)(Xe.d,{color:"whiteAlpha.600",children:"Events"})]})}),Object(k.jsx)(Xe.b,{children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((function(e,t){return Object(k.jsxs)(Xe.f,{children:[Object(k.jsx)(Xe.c,{maxW:{base:"100px",md:"200px"},children:e.name}),Object(k.jsx)(Xe.c,{display:{base:"none",md:"table-cell"},maxW:"200px",children:e.email}),Object(k.jsx)(Xe.c,{children:e.events.length})]},t)})):Object(k.jsx)(j.a,{py:"2",px:"6",color:"whiteAlpha.600",children:n?Object(k.jsx)(k.Fragment,{children:n}):Object(k.jsx)(k.Fragment,{children:"No guests"})})})]})})};var Re=function(e){var t=e.id,n=e.admin,a=e.email,o=Object(r.useState)(void 0),c=Object(d.a)(o,2),i=c[0],h=c[1],p=Object(ue.a)(),x=p.isOpen,f=p.onOpen,O=p.onClose,g=Object(C.a)();Object(r.useEffect)((function(){S()}),[]);var v=function(){var e=Object(l.a)(s.a.mark((function e(n){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("id, createdBy").eq("id",t).single();case 3:return r=e.sent,a=r.data,o=[],null===a||void 0===a||a.createdBy.forEach((function(e){e!==n&&o.push(e)})),e.next=9,y.from("events").upsert({id:a.id,createdBy:o},{returning:"minimal"});case 9:window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){return Object(k.jsxs)(be.a,{isOpen:x,onClose:O,children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(k.jsx)(be.c,{}),Object(k.jsx)(be.b,{children:Object(k.jsxs)(u.a,{transitionDuration:"200ms",overflow:"clip",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(k.jsx)($.a,{size:"md",src:null===i||void 0===i?void 0:i.avatar_url,name:(null===i||void 0===i?void 0:i.username)||a}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===i||void 0===i?void 0:i.username}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:i?"xs":"sm",children:a})]})]})}),Object(k.jsxs)(be.e,{children:[Object(k.jsx)(m.a,{size:"sm",bg:"whiteAlpha.300",mr:"2",_hover:{},_active:{},onClick:O,children:"Close"}),Object(k.jsx)(m.a,{size:"sm",bg:"red",_hover:{},_active:{},onClick:function(){a===window.localStorage.getItem("email")?g({title:"Error",position:"bottom",description:"Cannot remove admin from host",status:"error",duration:5e3,isClosable:!0}):v(a)},children:"Remove from host"})]})]})]})},S=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("users").select("username, avatar_url, email").eq("email",a).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:h(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{onClick:function(){n===window.localStorage.getItem("email")&&f()},border:"1px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(k.jsx)(w,{}),Object(k.jsx)($.a,{size:"md",src:null===i||void 0===i?void 0:i.avatar_url,name:(null===i||void 0===i?void 0:i.username)||a}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===i||void 0===i?void 0:i.username}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:i?"xs":"sm",children:a})]})]})};var Le=function(e){var t=e.eventId,n=e.eventName,a=e.eventDescription,o=e.eventImage,c=e.eventPlatform,i=e.eventLink,h=e.eventDate,p=e.eventContent,x=[{name:"\ud83d\udcbb Virtual",enum:"Virtual",placeholder:"Link to event"},{name:"\ud83c\udf0d In Person",enum:"InPerson",placeholder:"Location to event"}],O=Object(r.useState)("Virtual"===c?x[0]:x[1]),g=Object(d.a)(O,2),v=g[0],w=g[1],S=Object(r.useState)(i),I=Object(d.a)(S,2),z=I[0],W=I[1],E=Object(r.useState)(o),F=Object(d.a)(E,2),D=F[0],B=F[1],N=Object(r.useState)(n),X=Object(d.a)(N,2),T=X[0],R=X[1],L=Object(r.useState)(h),M=Object(d.a)(L,2),G=M[0],J=M[1],P=Object(r.useState)(a),U=Object(d.a)(P,2),V=U[0],K=U[1],Q=Object(r.useState)(p),Z=Object(d.a)(Q,2),$=Z[0],ee=Z[1],te=Object(r.useState)(!1),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],oe=Object(r.useState)(!1),ce=Object(d.a)(oe,2),ie=ce[0],se=ce[1],le=Object(C.a)(),de=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","kolmmszz"),e.prev=3,se(!0),e.next=7,Oe.a.post("https://api.cloudinary.com/v1_1/relmcloud/image/upload",n);case 7:r=e.sent,console.log(r),B(r.data.url),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.prev=15,se(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T.length>3)){e.next=24;break}return e.prev=1,ae(!0),{},n={id:t,name:T,description:V,content:$,date:G,link:z,image:D,platform:v.enum},e.next=7,y.from("events").upsert(n,{returning:"minimal"});case 7:if(r=e.sent,!(a=r.error)){e.next=11;break}throw a;case 11:le({title:"Success",position:"bottom",description:"Event updated successfully!",status:"success",duration:5e3,isClosable:!0}),window.location.reload(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),le({title:"Error",position:"bottom",description:e.t0.error_description||e.t0.message,status:"error",duration:5e3,isClosable:!0});case 19:return e.prev=19,ae(!1),e.finish(19);case 22:e.next=25;break;case 24:le({title:"Error",position:"bottom",description:"Event name should have more than 3 characters",status:"error",duration:5e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),be=function(){return Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",mb:"4",children:[Object(k.jsx)(Ae.a,{})," ",Object(k.jsx)(j.a,{children:"Where will it happen? *"})]}),Object(k.jsx)(u.a,{p:"1.5",bg:"whiteAlpha.200",w:"-webkit-fit-content",experimental_spaceX:"3",rounded:"lg",children:x.map((function(e,t){return Object(k.jsx)(b.a,{onClick:function(){w(e),W("")},cursor:"pointer",color:e.name===v.name?"white":"whiteAlpha.800",_hover:{color:"white"},transitionDuration:"200ms",bg:e.name===v.name?"whiteAlpha.300":"transparent",px:"4",py:"1",rounded:"base",children:e.name},t)}))})]})};return Object(k.jsxs)(u.a,{alignItems:"center",mt:"6",direction:"column",color:"white",children:[Object(k.jsx)(H.a,{ratio:1920/1080,w:"full",shadow:"xl",children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(f.a,{rounded:"lg",src:D}),Object(k.jsx)(m.a,{position:"absolute",bottom:"0",left:"0",m:"4",size:"sm",bg:"blackAlpha.600",border:"1px",onClick:function(){return document.getElementById("file").click()},borderColor:"transparent",_hover:{borderColor:"whiteAlpha.200",bg:"blackAlpha.800"},_focus:{},_active:{bg:"blackAlpha.700"},children:ie?Object(k.jsx)(A.a,{}):Object(k.jsx)(k.Fragment,{children:"Change cover photo"})})]})}),Object(k.jsx)(_.a,{type:"file",accept:"image/*",id:"file",display:"none",onChange:function(e){return de(e.target.files[0])}}),Object(k.jsx)(b.a,{w:"full",mt:"4",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ue()},children:[Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",children:"Event Name *"}),Object(k.jsx)(_.a,{w:"full",onChange:function(e){return R(e.target.value)},type:"text",value:T,mt:"1.5",py:"5",isRequired:!0,px:"0",rounded:"none",color:"white",fontSize:"xl",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"1px",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Designing Session"}),Object(k.jsx)(be,{}),Object(k.jsx)(_.a,{w:"full",type:"text",mt:"3",py:"5",rounded:"lg",color:"white",isRequired:!0,value:z,onChange:function(e){return W(e.target.value)},_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:v.placeholder}),Object(k.jsxs)(u.a,{fontSize:"xl",fontWeight:"semibold",color:"brand.primary",alignItems:"center",experimental_spaceX:"3",mt:"8",children:[Object(k.jsx)(Y.a,{})," ",Object(k.jsx)(j.a,{children:"When will it happen? *"})]}),Object(k.jsxs)(u.a,{experimental_spaceX:"4",mt:"2",children:[Object(k.jsx)(_.a,{w:"full",type:"date",defaultValue:h.year+"-"+h.month+"-"+h.date,placeholder:"Date",onChange:function(e){var t=e.target.value;console.log(t);var n=t.split("-");J(Object(q.a)(Object(q.a)({},G),{},{date:n[2],month:n[1],year:n[0]})),console.log(G)},mt:"1.5",py:"5",rounded:"lg",isRequired:!0,color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}}),Object(k.jsx)(_.a,{w:{sm:"70%",lg:"40%"},type:"time",placeholder:"Time",defaultValue:ze()(h.time,"hh:mm A").format("HH:mm"),onChange:function(e){J(Object(q.a)(Object(q.a)({},G),{},{time:ze()(e.target.value,"HH:mm").format("hh:mm A")}))},mt:"1.5",isRequired:!0,py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"}})]}),Object(k.jsx)(j.a,{mt:"1",color:"whiteAlpha.500",children:"* Date and time is in GMT+5:30"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"6",children:"Description"}),Object(k.jsx)(_.a,{value:V,w:"full",type:"text",onChange:function(e){return K(e.target.value)},mt:"1.5",py:"5",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Describe about your event in brief"}),Object(k.jsx)(j.a,{color:"white",fontWeight:"medium",fontSize:"sm",mt:"4",children:"Content"}),Object(k.jsx)(je.a,{w:"full",value:$,onChange:function(e){return ee(e.target.value)},type:"text",mt:"1.5",py:"3",rounded:"lg",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Write about your event"}),Object(k.jsx)(m.a,{color:"black",float:"right",mt:"6",type:"submit",rounded:"lg",_focus:{},_active:{},leftIcon:re?Object(k.jsx)(A.a,{size:"sm"}):Object(k.jsx)(xe.a,{size:"20px"}),children:"Update Event"})]})})]})};var He=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),x=h[0],f=h[1],O=Object(r.useState)([]),g=Object(d.a)(O,2),v=g[0],w=g[1],S=Object(Fe.a)("".concat(window.location.origin,"/event/").concat(t)),I=S.hasCopied,z=S.onCopy,W=Object(E.f)(),D=Object(C.a)(),B=Object(r.useState)(!1),N=Object(d.a)(B,2),q=N[0],X=N[1],T=Object(r.useState)(!1),R=Object(d.a)(T,2),H=R[0],M=R[1],G=Object(r.useState)(!1),J=Object(d.a)(G,2),P=J[0],U=J[1],V=Object(r.useState)(!1),Q=Object(d.a)(V,2),Z=Q[0],$=Q[1],ee=Object(ue.a)(),te=ee.isOpen,ne=ee.onOpen,re=ee.onClose;Object(r.useEffect)((function(){ie(),ce()}),[]);var ce=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("audience").select("name, email, events").contains("events",[t]);case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:f(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("id, name, image, link, description, content, date, community, audience, createdBy, admin, isListed, isOpen,platform").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),X(r.isListed),M(r.isOpen),w(r.createdBy),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(!0),{},n={id:t,isOpen:H,isListed:q},console.log(q,H),console.log(n),e.next=8,y.from("events").upsert(n,{returning:"minimal"});case 8:if(r=e.sent,!(a=r.error)){e.next=12;break}throw a;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:return e.prev=17,$(!1),U(!1),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(ue.a)(),n=e.isOpen,r=e.onOpen,a=e.onClose,o=function(){return Object(k.jsxs)(be.a,{isOpen:n,onClose:a,children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{pb:"3",bg:"#1D2023",color:"white",children:[Object(k.jsx)(be.f,{children:"Add host"}),Object(k.jsx)(be.c,{}),Object(k.jsx)(be.b,{children:Object(k.jsx)(_.a,{id:"email",type:"email",_placeholder:{color:"whiteAlpha.500"},placeholder:"Email",_focus:{borderColor:"brand.primary"}})}),Object(k.jsx)(be.e,{children:Object(k.jsx)(m.a,{bg:"brand.primary",_hover:{},_active:{},onClick:Object(l.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=document.getElementById("email").value,!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase())){e.next=18;break}return v.push(document.getElementById("email").value),e.prev=2,e.next=5,y.from("events").upsert({id:t,createdBy:Object(Ee.a)(new Set(v))},{returning:"minimal"});case 5:if(n=e.sent,!(r=n.error)){e.next=9;break}throw r;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:a(),window.location.reload(),e.next=19;break;case 18:D({title:"Error",position:"bottom",description:"Enter a valid email address",status:"error",duration:5e3,isClosable:!0});case 19:case"end":return e.stop()}var o}),e,null,[[2,11]])}))),children:"Add"})})]})]})};return Object(k.jsxs)(u.a,{border:"2px",cursor:"pointer",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"whiteAlpha.50",p:"2",justify:"center",borderStyle:"dashed",alignItems:"center",rounded:"xl",w:"full",onClick:r,minH:"14",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(k.jsx)(o,{}),Object(k.jsx)(L.a,{})]})},je=function(){return Object(k.jsxs)(be.a,{size:"3xl",isOpen:te,onClose:re,children:[Object(k.jsx)(be.g,{}),Object(k.jsxs)(be.d,{bg:"#1D2023",children:[Object(k.jsxs)(be.f,{color:"white",children:["Settings ",Object(k.jsx)(be.c,{color:"white"})]}),Object(k.jsx)(be.b,{px:"8",pb:"8",children:Object(k.jsx)(Le,{eventId:t,eventName:null===o||void 0===o?void 0:o.name,eventContent:null===o||void 0===o?void 0:o.content,eventDate:null===o||void 0===o?void 0:o.date,eventDescription:null===o||void 0===o?void 0:o.description,eventPlatform:null===o||void 0===o?void 0:o.platform,eventImage:null===o||void 0===o?void 0:o.image,eventLink:null===o||void 0===o?void 0:o.link})})]})]})},me=function(){return Object(k.jsxs)(De.a,{children:[Object(k.jsx)(_.a,{cursor:"pointer",transitionDuration:"200ms",onClick:function(){window.open("".concat(window.location.origin,"/event/").concat(t),"_blank")},_hover:{color:"brand.primary"},value:"".concat(window.location.origin,"/event/").concat(t),isReadOnly:!0,rounded:"lg",border:"none",bg:"whiteAlpha.200"}),Object(k.jsx)(Be.b,{onClick:function(){return z()},cursor:"pointer",p:"2",roundedRight:"lg",transitionDuration:"200ms",_hover:{color:"brand.primary"},children:Object(k.jsx)(K.a,{label:"Copy to clipboard",children:I?Object(k.jsx)(F.a,{}):Object(k.jsx)(qe.a,{size:"20px"})})})]})},pe=function(){var e=Object(Fe.a)("".concat(window.location.origin,"/feedback/").concat(t)),n=e.hasCopied,r=e.onCopy;return Object(k.jsxs)(b.a,{mb:"6",children:[Object(k.jsx)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"FEEDBACK FORM LINK"})}),Object(k.jsxs)(De.a,{mt:"2",maxW:{md:"300px"},children:[Object(k.jsx)(_.a,{cursor:"pointer",transitionDuration:"200ms",onClick:function(){window.open("".concat(window.location.origin,"/feedback/").concat(t),"_blank")},_hover:{color:"brand.primary"},value:"".concat(window.location.origin,"/feedback/").concat(t),isReadOnly:!0,rounded:"lg",border:"none",bg:"whiteAlpha.200"}),Object(k.jsx)(Be.b,{onClick:function(){return r()},cursor:"pointer",p:"2",roundedRight:"lg",transitionDuration:"200ms",_hover:{color:"brand.primary"},children:Object(k.jsx)(K.a,{label:"Copy to clipboard",children:n?Object(k.jsx)(F.a,{}):Object(k.jsx)(qe.a,{size:"20px"})})})]})]})};return Object(k.jsxs)(ae,{children:[o?Object(k.jsx)(le.a,{children:Object(k.jsxs)("title",{children:[null===o||void 0===o?void 0:o.name," | Relm"]})}):Object(k.jsx)(k.Fragment,{}),o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(b.a,{children:Object(k.jsxs)(u.a,{justify:"space-between",alignItems:"end",children:[Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(u.a,{experimental_spaceX:"3",alignItems:"center",children:[Object(k.jsx)(b.a,{cursor:"pointer",p:"2",w:"10",h:"10",onClick:function(){W.goBack()},rounded:"full",_hover:{bg:"whiteAlpha.200"},children:Object(k.jsx)(he.a,{})}),Object(k.jsx)(j.a,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",children:null===o||void 0===o?void 0:o.name})]}),Object(k.jsxs)(u.a,{fontSize:"xs",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(k.jsx)(Y.a,{size:"14px"}),Object(k.jsx)(j.a,{children:oe(null===o||void 0===o?void 0:o.date)})]}),(null===o||void 0===o?void 0:o.description)?Object(k.jsx)(j.a,{mt:"1",fontSize:{base:"xs",md:"sm"},fontWeight:"thin",children:null===o||void 0===o?void 0:o.description}):Object(k.jsx)(k.Fragment,{})]}),Object(k.jsxs)(u.a,{direction:"column",alignItems:"end",experimental_spaceY:"1",children:[Object(k.jsxs)(b.a,{_hover:{bg:"whiteAlpha.200"},rounded:"full",p:"2",cursor:"pointer",onClick:ne,children:[Object(k.jsx)(je,{}),Object(k.jsx)(ve.a,{size:"20px"})]}),Object(k.jsxs)(b.a,{display:{base:"none",md:"block"},children:[Object(k.jsx)(j.a,{fontSize:"xs",mb:"1",color:"whiteAlpha.500",children:"Sharable invite link"}),Object(k.jsx)(me,{})]})]})]})}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"}),Object(k.jsxs)(b.a,{display:{base:"block",md:"none"},children:[Object(k.jsx)(u.a,{justify:"space-between",mt:"4",alignItems:"center",children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"INVITE LINK"})}),Object(k.jsx)(b.a,{mt:"2",children:Object(k.jsx)(me,{})})]}),Object(k.jsx)(u.a,{justify:"space-between",mt:"8",alignItems:"center",children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"GUESTS"})}),Object(k.jsx)(Te,{audience:x}),Object(k.jsx)(u.a,{justify:"space-between",mt:"8",alignItems:"center",children:Object(k.jsx)(j.a,{casing:"capitalize",fontSize:"sm",fontWeight:"semibold",letterSpacing:"2px",color:"white",children:"HOST & MANAGERS"})}),Object(k.jsxs)(u.a,{mt:"4",wrap:"wrap",children:[null===o||void 0===o?void 0:o.createdBy.map((function(e,n){return Object(k.jsx)(Re,{id:t,admin:null===o||void 0===o?void 0:o.admin,email:e},n)})),window.localStorage.getItem("email")===(null===o||void 0===o?void 0:o.admin)?Object(k.jsx)(de,{}):Object(k.jsx)(k.Fragment,{})]}),Object(k.jsx)(pe,{}),Object(k.jsxs)(u.a,{direction:"column",mt:"4",children:[Object(k.jsx)(Ne.a,{w:"-webkit-fit-content",onChange:function(e){X(e.target.checked),U(!0)},isChecked:q,children:"Listed publicly"}),Object(k.jsx)(Ne.a,{w:"-webkit-fit-content",onChange:function(e){M(e.target.checked),U(!0)},isChecked:H,children:"Registrations open"}),Object(k.jsx)(b.a,{children:Object(k.jsx)(m.a,{display:P?"block":"none",float:"right",size:"sm",mt:"2",minW:"28",onClick:function(){se()},colorScheme:"whiteAlpha",children:Z?Object(k.jsx)(A.a,{size:"sm"}):Object(k.jsx)(k.Fragment,{children:" Save changes"})})})]})]}):Object(k.jsx)(k.Fragment,{})]})},Me=n(264);var Ye=function(e){var t=e.match.params.id,n=R().user,a=Object(r.useState)(void 0),o=Object(d.a)(a,2),c=o[0],i=o[1],u=Object(r.useState)(void 0),m=Object(d.a)(u,2),h=m[0],x=m[1],f=Object(r.useState)(""),O=Object(d.a)(f,2),g=O[0],v=O[1],w=Object(r.useState)(void 0),S=Object(d.a)(w,2),C=S[0],A=S[1];Object(r.useEffect)((function(){t&&z(),I()}),[]);var I=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=12;break}return e.next=4,y.from("audience").select("name, email, events").contains("communities",[t]).order("created_at",{ascending:!1});case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:i(r),e.next=20;break;case 12:return e.next=14,y.from("audience").select("name, email, events").eq("createdBy",localStorage.getItem("email")).order("created_at",{ascending:!1});case 14:if(o=e.sent,c=o.data,!(l=o.error)){e.next=19;break}throw l;case 19:i(c);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:A(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{communityId:t,children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"Audience | Relm"})}),Object(k.jsxs)(b.a,{children:[t?Object(k.jsx)(ke,{username:null===n||void 0===n?void 0:n.username,communityName:null===C||void 0===C?void 0:C.name}):Object(k.jsx)(k.Fragment,{}),Object(k.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Audience"}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"}),Object(k.jsxs)(b.a,{mt:"6",children:[Object(k.jsxs)(De.a,{children:[Object(k.jsx)(Be.a,{color:"brand.primary",children:Object(k.jsx)(Me.a,{size:"18px"})}),Object(k.jsx)(_.a,{onChange:function(e){var t=e.target.value;v(t);var n=[];null===c||void 0===c||c.forEach((function(e){(e.name.startsWith(t)||e.email.startsWith(t))&&n.push(e)})),x(n)},py:"5",rounded:"xl",color:"white",_hover:{borderColor:"whiteAlpha.900"},_focus:{borderColor:"brand.primary"},borderColor:"whiteAlpha.400",_placeholder:{color:"whiteAlpha.400"},placeholder:"Search"})]}),Object(k.jsx)(Te,{placeholder:"No audience",audience:g.length>0?h:c,communityId:t})]})]})]})},Ge=n(266),Je=n(265),Pe=n(267),Ue=n(97),Ve=n.n(Ue);n(202);var Ke=function(e){var t=e.email,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1];Object(r.useEffect)((function(){i(),console.log("again")}),[]);var i=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("users").select("username, avatar_url, email").eq("email",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{border:"1px",cursor:"pointer",mb:"2",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",p:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",maxW:{base:"full",md:"280px"},children:[Object(k.jsx)($.a,{size:"sm",src:null===o||void 0===o?void 0:o.avatar_url,name:(null===o||void 0===o?void 0:o.username)||t}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:(null===o||void 0===o?void 0:o.username)?"semibold":"normal",fontSize:"sm",children:(null===o||void 0===o?void 0:o.username)?null===o||void 0===o?void 0:o.username:t}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xx-small",children:"Host"})]})]})};var Qe=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=new Ve.a.Converter,h=Object(r.useState)(void 0),x=Object(d.a)(h,2),O=x[0],g=x[1],v=Object(r.useState)(!1),w=Object(d.a)(v,2),I=w[0],W=w[1],E=Object(r.useState)(""),F=Object(d.a)(E,2),D=F[0],B=F[1],N=Object(r.useState)(""),q=Object(d.a)(N,2),X=q[0],T=q[1],R=Object(C.a)();Object(r.useEffect)((function(){M(),window.localStorage.getItem("email")&&L()}),[]);var L=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("users").select("username, avatar_url, email").eq("email",window.localStorage.getItem("email")).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:g(n),B(n.username),T(n.email),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("name, description, date, community, image, content, platform, link, isListed, isOpen, createdBy, admin, audience").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,c,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,y.from("audience").select("events, communities").eq("email",X).single();case 4:return n=e.sent,r=n.data,a=[],c=[],r?(r.events.push(t),r.communities.push(null===o||void 0===o?void 0:o.community),a=r.events,c=r.communities):(a=[t],c=[null===o||void 0===o?void 0:o.community]),i={email:X,name:D,events:Object(Ee.a)(new Set(a)),communities:Object(Ee.a)(new Set(c)),createdBy:null===o||void 0===o?void 0:o.admin},e.next=12,y.from("audience").upsert(i,{returning:"minimal"});case 12:return e.next=14,y.from("audience").select("name, email, events").contains("events",[t]);case 14:return l=e.sent,e.next=17,y.from("events").upsert({id:t,audience:l.data.length},{returning:"minimal"});case 17:if(!(null===o||void 0===o?void 0:o.community)){e.next=23;break}return e.next=20,y.from("audience").select("name, email, events").contains("communities",[null===o||void 0===o?void 0:o.community]);case 20:return d=e.sent,e.next=23,y.from("communities").upsert({id:null===o||void 0===o?void 0:o.community,audience:d.data.length},{returning:"minimal"});case 23:R({title:"Success",position:"bottom",description:"You are successfully registered!",status:"success",duration:5e3,isClosable:!0}),B(""),T(""),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.log(e.t0);case 31:return e.prev=31,W(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,28,31,34]])})));return function(){return e.apply(this,arguments)}}(),J=function(){return Object(k.jsxs)(u.a,{cursor:"default",borderColor:"transparent",transitionDuration:"200ms",overflow:"clip",mb:"4",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",children:[Object(k.jsx)($.a,{size:"md",src:null===O||void 0===O?void 0:O.avatar_url,name:null===O||void 0===O?void 0:O.username}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===O||void 0===O?void 0:O.username}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:null===O||void 0===O?void 0:O.email})]})]})};return Object(k.jsx)(k.Fragment,{children:o?Object(k.jsx)(k.Fragment,{children:(null===o||void 0===o?void 0:o.isListed)?Object(k.jsxs)(u.a,{bg:"brand.secondary",alignItems:"center",w:"full",direction:"column",children:[Object(k.jsxs)(b.a,{minH:"100vh",py:"6",px:{base:"6",md:"12"},maxW:"1100px",w:"full",color:"white",children:[Object(k.jsx)(b.a,{px:{lg:"20"},children:Object(k.jsx)(S,{communityId:null===o||void 0===o?void 0:o.community})}),Object(k.jsxs)(b.a,{mx:"auto",mt:"6",children:[Object(k.jsx)(H.a,{ratio:1920/1080,children:Object(k.jsx)(f.a,{src:null===o||void 0===o?void 0:o.image,rounded:"xl"})}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{fontWeight:"bold",fontSize:"3xl",mt:"4",children:null===o||void 0===o?void 0:o.name}),Object(k.jsxs)(u.a,{fontSize:"sm",color:"brand.primary",experimental_spaceX:"1.5",alignItems:"center",mt:"1",children:[Object(k.jsx)(Y.a,{size:"18px"}),Object(k.jsx)(j.a,{children:oe(null===o||void 0===o?void 0:o.date)})]}),Object(k.jsxs)(u.a,{direction:{base:"column",md:"row"},children:[Object(k.jsxs)(b.a,{w:"full",children:[Object(k.jsx)(b.a,{mt:"10",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(null===o||void 0===o?void 0:o.isOpen)?G():R({title:"Error",position:"bottom",description:"Event registrations are already closed",status:"Error",duration:5e3,isClosable:!0})},children:[Object(k.jsx)(j.a,{fontSize:"xl",mb:"3",fontWeight:"medium",children:"Register for the event"}),Object(k.jsxs)(u.a,{bg:"whiteAlpha.100",p:"5",rounded:"xl",direction:"column",alignItems:"end",children:[window.localStorage.getItem("email")?Object(k.jsx)(J,{}):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(b.a,{w:"full",children:[Object(k.jsx)(_.a,{required:!0,value:D,onChange:function(e){return B(e.target.value)},w:"full",_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",borderColor:"transparent",rounded:"lg",mb:"2",py:"5",placeholder:"Your name",_placeholder:{color:"whiteAlpha.400"}}),Object(k.jsx)(_.a,{w:"full",type:"email",value:X,onChange:function(e){return T(e.target.value)},id:"email",required:!0,_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",py:"5",borderColor:"transparent",rounded:"lg",placeholder:"Your email",_placeholder:{color:"whiteAlpha.400"}})]})}),Object(k.jsx)(m.a,{mt:"4",px:"6",type:(null===o||void 0===o?void 0:o.isOpen)?"submit":"button",w:"-webkit-fit-content",cursor:(null===o||void 0===o?void 0:o.isOpen)?"pointer":"not-allowed",_hover:{},_active:{},_focus:{},leftIcon:(null===o||void 0===o?void 0:o.isOpen)?I?Object(k.jsx)(A.a,{size:"sm"}):Object(k.jsx)(xe.a,{size:"18px"}):Object(k.jsx)(Je.a,{size:"18px"}),bg:"brand.primary",fontSize:"sm",rounded:"lg",children:(null===o||void 0===o?void 0:o.isOpen)?Object(k.jsx)(k.Fragment,{children:"Register"}):Object(k.jsx)(k.Fragment,{children:"Registrations are closed"})})]})]})}),(null===o||void 0===o?void 0:o.description)||(null===o||void 0===o?void 0:o.content)?Object(k.jsxs)(b.a,{mt:"8",children:[Object(k.jsx)(j.a,{fontSize:"xl",mb:"4",fontWeight:"medium",children:"Event Details :"}),(null===o||void 0===o?void 0:o.description)?Object(k.jsx)(j.a,{fontSize:"lg",fontWeight:"semibold",children:null===o||void 0===o?void 0:o.description}):Object(k.jsx)(k.Fragment,{}),(null===o||void 0===o?void 0:o.content)?Object(k.jsx)(j.a,{id:"content",fontSize:"base",mt:"2",fontWeight:"thin",dangerouslySetInnerHTML:{__html:i.makeHtml(null===o||void 0===o?void 0:o.content)}}):Object(k.jsx)(k.Fragment,{})]}):Object(k.jsx)(k.Fragment,{})]}),Object(k.jsx)(b.a,{minW:{md:"240px",lg:"300px"},maxW:{md:"240px",lg:"350px"},ml:{md:"10"},children:Object(k.jsxs)(b.a,{children:[ie(null===o||void 0===o?void 0:o.date)?Object(k.jsx)(k.Fragment,{}):Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{opacity:"0.5",children:"Event has end"}),Object(k.jsx)(m.a,{_hover:{},_active:{bg:"pink.600"},_focus:{},bg:"brand.primary",color:"white",px:"6",mt:"2",fontSize:"sm",onClick:function(){return window.location.href="".concat(window.location.origin,"/feedback/").concat(t)},mb:{base:"4",md:"0"},w:"full",children:"Send Feedback"}),Object(k.jsx)(p.a,{my:"6",color:"white",opacity:"0.2"})]}),Object(k.jsxs)(b.a,{mb:"2",children:[Object(k.jsx)(j.a,{fontSize:"xl",fontWeight:"medium",children:"Join Details :"}),Object(k.jsx)(u.a,{alignItems:"center",color:"brand.primary",cursor:"pointer",transitionDelay:"200ms",my:"4",children:"Virtual"===(null===o||void 0===o?void 0:o.platform)?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ge.a,{isExternal:!0,href:null===o||void 0===o?void 0:o.link,_focus:{},fontSize:"lg",mr:"1",isTruncated:!0,children:null===o||void 0===o?void 0:o.link}),Object(k.jsx)(b.a,{minW:"20px",onClick:function(){window.open(null===o||void 0===o?void 0:o.link,"_blank")},children:Object(k.jsx)(Pe.a,{})})]}):Object(k.jsxs)(u.a,{alignItems:"start",w:"-webkit-fit-content",children:[Object(k.jsx)(b.a,{minW:"20px",children:Object(k.jsx)(Ae.a,{size:"18px"})}),Object(k.jsx)(j.a,{fontSize:"lg",ml:"2",mt:"-1",wordBreak:"break-all",children:null===o||void 0===o?void 0:o.link})]})})]}),Object(k.jsx)(p.a,{color:"white",opacity:"0.2"}),Object(k.jsx)(b.a,{mt:"6",children:null===o||void 0===o?void 0:o.createdBy.map((function(e,t){return Object(k.jsx)(Ke,{email:e},t)}))})]})})]})]})]})]}),Object(k.jsxs)(b.a,{w:"full",mt:"10",children:[Object(k.jsx)(p.a,{opacity:"0.1"}),Object(k.jsx)(z,{})]})]}):Object(k.jsx)(u.a,{minH:"100vh",color:"white",bg:"brand.secondary",justify:"center",alignItems:"center",children:"lol 404"})}):Object(k.jsx)(k.Fragment,{})})},Ze=n(268);var $e=function(e){var t=e.match.params.id,n=Object(r.useState)(void 0),a=Object(d.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),h=Object(d.a)(i,2),x=h[0],f=h[1],O=Object(r.useState)(""),g=Object(d.a)(O,2),v=g[0],w=g[1],I=Object(r.useState)(""),W=Object(d.a)(I,2),E=W[0],F=W[1],D=Object(r.useState)(""),B=Object(d.a)(D,2),N=B[0],q=B[1],X=Object(r.useState)(!1),T=Object(d.a)(X,2),R=T[0],L=T[1],H=Object(r.useState)(!1),M=Object(d.a)(H,2),Y=M[0],G=M[1],J=Object(r.useState)("\ud83e\udd29"),P=Object(d.a)(J,2),U=P[0],V=P[1],K=Object(r.useState)(void 0),Q=Object(d.a)(K,2),Z=Q[0],ee=Q[1],te=Object(C.a)();Object(r.useEffect)((function(){oe(),(null===o||void 0===o?void 0:o.community)&&ae(null===o||void 0===o?void 0:o.community),window.localStorage.getItem("email")&&re()}),[null===o||void 0===o?void 0:o.community]);var ne=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),t={name:v,email:E,content:N,rating:U,event:null===o||void 0===o?void 0:o.id,community:null===x||void 0===x?void 0:x.id,createdBy:null===o||void 0===o?void 0:o.admin},e.next=5,y.from("insights").upsert(t,{returning:"minimal"});case 5:if(n=e.sent,!(r=n.error)){e.next=9;break}throw r;case 9:G(!0),Z||(w(""),F("")),q(""),V("\ud83e\udd29"),te({title:"Success",position:"bottom",description:"We are happy to get your feedback \ud83d\ude04",status:"success",duration:5e3,isClosable:!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:return e.prev=19,L(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("users").select("username, avatar_url, email").eq("email",window.localStorage.getItem("email")).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:ee(n),w(n.username),F(n.email),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("communities").select("id, name, logo").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:f(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("id, name, description, date, community, image, content, platform, link, isListed, isOpen, createdBy, admin, audience").eq("id",t).single();case 3:if(n=e.sent,r=n.data,!(a=n.error)){e.next=8;break}throw a;case 8:c(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(k.Fragment,{children:o?Object(k.jsx)(k.Fragment,{children:(null===o||void 0===o?void 0:o.isListed)?Object(k.jsxs)(u.a,{bg:"brand.secondary",alignItems:"center",w:"full",direction:"column",children:[Object(k.jsxs)(b.a,{minH:"100vh",py:"6",px:{base:"6",md:"12"},maxW:"1100px",w:"full",color:"white",children:[Object(k.jsx)(b.a,{children:Object(k.jsx)(S,{communityId:null===o||void 0===o?void 0:o.community})}),Object(k.jsxs)(b.a,{mt:"20",children:[Object(k.jsxs)(j.a,{fontSize:"2xl",mb:"3",fontWeight:"bold",children:[x?Object(k.jsx)(k.Fragment,{children:null===x||void 0===x?void 0:x.name}):Object(k.jsx)(k.Fragment,{children:"We"})," would love your feedback"]}),Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),ne()},children:Object(k.jsxs)(u.a,{bg:"whiteAlpha.100",p:"5",rounded:"xl",direction:"column",children:[Z?Object(k.jsxs)(u.a,{cursor:"default",borderColor:"transparent",transitionDuration:"200ms",overflow:"clip",mb:"2",alignItems:"center",rounded:"xl",w:"full",experimental_spaceX:"4",children:[Object(k.jsx)($.a,{size:"md",src:null===Z||void 0===Z?void 0:Z.avatar_url,name:null===Z||void 0===Z?void 0:Z.username}),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:null===Z||void 0===Z?void 0:Z.username}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:null===Z||void 0===Z?void 0:Z.email})]})]}):Object(k.jsxs)(u.a,{experimental_spaceX:{base:"0",md:"5"},experimental_spaceY:{base:"3",md:"0"},direction:{base:"column",md:"row"},children:[Object(k.jsx)(_.a,{required:!0,value:v,onChange:function(e){return w(e.target.value)},w:"full",_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",borderColor:"transparent",rounded:"lg",py:"5",placeholder:"Your name",_placeholder:{color:"whiteAlpha.400"}}),Object(k.jsx)(_.a,{required:!0,value:E,type:"email",onChange:function(e){return F(e.target.value)},w:"full",_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",borderColor:"transparent",rounded:"lg",py:"5",placeholder:"Your email",_placeholder:{color:"whiteAlpha.400"}})]}),Object(k.jsx)(je.a,{required:!0,value:N,type:"email",onChange:function(e){return q(e.target.value)},w:"full",_focus:{border:"2px",borderColor:"brand.primary"},bg:"brand.secondary",border:"2px",borderColor:"transparent",rounded:"lg",mt:"4",minH:"200px",py:"5",placeholder:"Your message to us",_placeholder:{color:"whiteAlpha.400"}}),Object(k.jsx)(u.a,{fontSize:{base:"2xl",md:"3xl"},experimental_spaceX:{base:"2",md:"3"},mt:"4",children:["\ud83e\udd29","\ud83d\ude42","\ud83d\ude10","\ud83d\ude14","\ud83d\ude21"].map((function(e,t){return Object(k.jsx)(u.a,{onClick:function(){return V(e)},cursor:"pointer",_hover:{transform:"scale(1.1)",filter:"none"},transitionDuration:"100ms",justify:"center",alignItems:"center",p:"2",rounded:"full",w:{base:"10",md:"14"},h:{base:"10",md:"14"},bg:U===e?"whiteAlpha.200":"",filter:U===e?"none":"grayscale(80%)",children:e},t)}))}),Object(k.jsx)(u.a,{justify:"end",children:Object(k.jsx)(m.a,{type:"submit",mt:"4",bg:"brand.primary",fontSize:"sm",rounded:"lg",_hover:{},_active:{},_focus:{},rightIcon:R?Object(k.jsx)(A.a,{size:"sm"}):Y?Object(k.jsx)(xe.a,{size:"18px"}):Object(k.jsx)(Ze.a,{size:"18px"}),w:"-webkit-fit-content",children:Y?Object(k.jsx)(k.Fragment,{children:"Feedback sent"}):Object(k.jsx)(k.Fragment,{children:"Send"})})})]})})]})]}),Object(k.jsxs)(b.a,{w:"full",mt:"10",children:[Object(k.jsx)(p.a,{opacity:"0.1"}),Object(k.jsx)(z,{})]})]}):Object(k.jsx)(k.Fragment,{})}):Object(k.jsx)(k.Fragment,{})})};n(203);var et=function(e){var t=e.name,n=e.email,a=e.content,o=e.rating,c=e.event,i=new Ve.a.Converter,b=Object(r.useState)(void 0),m=Object(d.a)(b,2),h=m[0],p=m[1];Object(r.useEffect)((function(){x()}),[]);var x=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.from("events").select("name").eq("id",c).single();case 3:if(t=e.sent,n=t.data,!(r=t.error)){e.next=8;break}throw r;case 8:p(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{direction:"column",border:"1px",cursor:"pointer",h:"-webkit-fit-content",mr:{md:"4"},mb:"4",borderColor:"transparent",transitionDuration:"200ms",_hover:{borderColor:"whiteAlpha.200",bg:"whiteAlpha.100"},overflow:"clip",bg:"alpha.white",py:"4",px:"6",rounded:"xl",w:"full",maxW:{base:"full",md:"320px"},children:[Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"lg",children:t}),Object(k.jsx)(j.a,{align:"left",color:"white",whiteSpace:"nowrap",fontSize:"xs",children:n}),Object(k.jsx)(j.a,{id:"content",fontSize:"base",mt:"2",fontWeight:"thin",dangerouslySetInnerHTML:{__html:i.makeHtml(a)}}),Object(k.jsx)(j.a,{fontSize:"2xl",mt:"-2",children:o}),Object(k.jsx)(j.a,{align:"left",color:"white",mt:"2",whiteSpace:"nowrap",fontWeight:"semibold",fontSize:"sm",children:null===h||void 0===h?void 0:h.name})]})};var tt=function(e){var t=e.match.params.id,n=R().user,a=Object(r.useState)(void 0),o=Object(d.a)(a,2),c=o[0],i=o[1],m=Object(r.useState)(void 0),h=Object(d.a)(m,2),x=h[0],f=h[1];Object(r.useEffect)((function(){t&&g(),O()}),[]);var O=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=13;break}return e.next=4,y.from("insights").select("name, email, content, rating, event").eq("community",t).order("created_at",{ascending:!1});case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:console.log(r),i(r),e.next=21;break;case 13:return e.next=15,y.from("insights").select("name, email, content, rating, event").eq("createdBy",localStorage.getItem("email")).order("created_at",{ascending:!1});case 15:if(o=e.sent,c=o.data,!(l=o.error)){e.next=20;break}throw l;case 20:i(c);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(localStorage.getItem("email")),e.next=4,y.from("communities").select("id, name, logo,description,audience,events").contains("createdBy",[localStorage.getItem("email")]).eq("id",t).single();case 4:if(n=e.sent,r=n.data,!(a=n.error)){e.next=9;break}throw a;case 9:f(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(ae,{communityId:t,children:[Object(k.jsx)(le.a,{children:Object(k.jsx)("title",{children:"Insights | Relm"})}),Object(k.jsxs)(b.a,{children:[t?Object(k.jsx)(ke,{username:null===n||void 0===n?void 0:n.username,communityName:null===x||void 0===x?void 0:x.name}):Object(k.jsx)(k.Fragment,{}),Object(k.jsx)(j.a,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",children:"Insights"}),Object(k.jsx)(p.a,{mt:"3",color:"white",opacity:"0.2"})]}),c?(null===c||void 0===c?void 0:c.length)>0?Object(k.jsx)(u.a,{mt:"6",wrap:"wrap",children:c.map((function(e,t){return Object(k.jsx)(et,Object(q.a)({},e),t)}))}):Object(k.jsx)(u.a,{color:"whiteAlpha.600",my:"10",justify:"center",textAlign:"center",children:"\ud83d\udc1d No insights received"}):Object(k.jsx)(k.Fragment,{})]})};var nt=function(){var e=Object(r.useState)(void 0),t=Object(d.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(y.auth.session()),e.next=3,y.auth.onAuthStateChange((function(e,t){a(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(k.jsxs)(E.c,{children:[Object(k.jsx)(E.a,{exact:!0,path:"/",render:n?localStorage.getItem("email")?function(){return window.location.href="/home",Object(k.jsx)(de,{})}:function(){return Object(k.jsx)(N,{session:n})}:function(){return Object(k.jsx)(W,{})}}),Object(k.jsx)(E.a,{exact:!0,path:"/signin",render:localStorage.getItem("email")?function(){return window.location.href="/home",Object(k.jsx)(de,{})}:function(){return Object(k.jsx)(B,{})}}),Object(k.jsx)(E.a,{exact:!0,path:"/event/:id",component:Qe}),Object(k.jsx)(E.a,{exact:!0,path:"/feedback/:id",component:$e}),Object(k.jsx)(E.a,{exact:!0,path:"/auth",render:function(){return Object(k.jsx)(N,{session:n})}}),localStorage.getItem("email")?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(E.a,{exact:!0,path:"/home",component:de}),Object(k.jsx)(E.a,{exact:!0,path:"/new/community",component:ge}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/community/:id",component:Se}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/event/:id",component:He}),Object(k.jsx)(E.a,{exact:!0,path:"/events",component:Ce}),Object(k.jsx)(E.a,{exact:!0,path:"/new/event",component:We}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/community/:id/new/event",component:We}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/community/:id/events",component:Ce}),Object(k.jsx)(E.a,{exact:!0,path:"/audience",component:Ye}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/community/:id/audience",component:Ye}),Object(k.jsx)(E.a,{exact:!0,path:"/insights",component:tt}),Object(k.jsx)(E.a,{exact:!0,path:"/manage/community/:id/insights",component:tt})]}):Object(k.jsx)(B,{})]})},rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,283)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},at=n(279),ot=n(269),ct=Object(ot.a)({colors:{brand:{primary:"#FF4085",secondary:"#131517"},alpha:{white:"rgba(255, 255, 255, 0.1)"},pink:{600:"#DE316F",800:"#862F4E"},black:{400:"#212325"}},fonts:{brand:"Red Hat Display"}}),it=n(147);c.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(O.a,{children:Object(k.jsx)(it.a,{value:y,children:Object(k.jsx)(T,{children:Object(k.jsx)(at.a,{theme:ct,children:Object(k.jsx)(nt,{})})})})})}),document.getElementById("root")),rt()}},[[204,1,2]]]);
//# sourceMappingURL=main.b4666319.chunk.js.map